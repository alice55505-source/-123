const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/VideoPreview-C24NRJXb.js","assets/vendor-r3Eagn9n.js"])))=>i.map(i=>d[i]);
import{r as g,j as e,R as fe,a as Ee}from"./vendor-r3Eagn9n.js";(function(){const R=document.createElement("link").relList;if(R&&R.supports&&R.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))p(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const f of i.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&p(f)}).observe(document,{childList:!0,subtree:!0});function y(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function p(l){if(l.ep)return;l.ep=!0;const i=y(l);fetch(l.href,i)}})();const Re="modulepreload",Ie=function(n){return"/"+n},be={},we=function(R,y,p){let l=Promise.resolve();if(y&&y.length>0){let f=function(C){return Promise.all(C.map(v=>Promise.resolve(v).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),I=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));l=f(y.map(C=>{if(C=Ie(C),C in be)return;be[C]=!0;const v=C.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${C}"]${b}`))return;const N=document.createElement("link");if(N.rel=v?"stylesheet":Re,v||(N.as="script"),N.crossOrigin="",N.href=C,I&&N.setAttribute("nonce",I),document.head.appendChild(N),v)return new Promise((S,H)=>{N.addEventListener("load",S),N.addEventListener("error",()=>H(new Error(`Unable to preload CSS for ${C}`)))})}))}function i(f){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=f,window.dispatchEvent(d),!d.defaultPrevented)throw f}return l.then(f=>{for(const d of f||[])d.status==="rejected"&&i(d.reason);return R().catch(i)})};var F=(n=>(n.FADE="FADE",n.SLIDE_UP="SLIDE_UP",n.SLIDE_DOWN="SLIDE_DOWN",n.SLIDE_LEFT="SLIDE_LEFT",n.SLIDE_RIGHT="SLIDE_RIGHT",n.ZOOM_IN="ZOOM_IN",n.RANDOM="RANDOM",n))(F||{}),X=(n=>(n.IDLE="IDLE",n.COLLAGE="COLLAGE",n.EDITING="EDITING",n.RENDERING="RENDERING",n.FINISHED="FINISHED",n))(X||{});const Ce=({item:n,settings:R,selectedOverlayId:y,setSelectedOverlayId:p,onUpdate:l,isCropMode:i})=>{const f=g.useRef(null),d=g.useRef({}),I=g.useRef(""),[C,v]=g.useState(0),[b,N]=g.useState("NONE"),[S,H]=g.useState(null),[G,Q]=g.useState({x:0,y:0}),[A,q]=g.useState(null),$=R.resolution.width,z=R.resolution.height;g.useEffect(()=>{if(n.file||!f.current)return;const m=setInterval(()=>{if(b!=="NONE")return;const s=f.current.toDataURL("image/jpeg",.3);s.length!==I.current.length&&(I.current=s,l({previewUrl:s}))},2e3);return()=>clearInterval(m)},[n.id,n.file,l,b]),g.useEffect(()=>{const m=[];if(n.file&&n.previewUrl&&!d.current[n.previewUrl]&&m.push({key:n.previewUrl,url:n.previewUrl,type:n.type}),n.overlays.forEach(a=>{a.type==="image"&&a.sourceUrl&&!d.current[a.sourceUrl]&&m.push({key:a.sourceUrl,url:a.sourceUrl,type:"image"})}),m.length===0)return;let s=0;m.forEach(a=>{if(a.type==="video"){const x=document.createElement("video");x.src=a.url,x.muted=!0,x.onloadeddata=()=>{d.current[a.key]=x,s++,s===m.length&&v(w=>w+1)},x.onerror=()=>{s++,s===m.length&&v(w=>w+1)},x.load()}else{const x=new Image;x.src=a.url,x.onload=()=>{d.current[a.key]=x,s++,s===m.length&&v(w=>w+1)},x.onerror=()=>{s++,s===m.length&&v(w=>w+1)}}})},[n.id,n.overlays.length,n.type,n.file]);const ee=m=>{var x,w;return`${((x=m.fontFamily)==null?void 0:x.includes("KaiTi"))||((w=m.fontFamily)==null?void 0:w.includes("Noto"))?"bold":"normal"} ${m.fontSize}px ${m.fontFamily}`},J=(m,s)=>{let a=s.width,x=s.height;if(s.type==="text"){m.font=ee(s);const w=m.measureText(s.text||""),h=s.backgroundPadding||0;a=w.width+h*2,x=(s.fontSize||60)+h*2}return{w:a,h:x}},re=g.useCallback(()=>{const m=f.current;if(!m)return;const s=m.getContext("2d");if(s){if(s.clearRect(0,0,$,z),n.file){s.fillStyle="#0b0e14",s.fillRect(0,0,$,z);const a=d.current[n.previewUrl];if(a){const x=a instanceof HTMLVideoElement?a.videoWidth:a.width,w=a instanceof HTMLVideoElement?a.videoHeight:a.height;if(x>0&&w>0){const h=Math.max($/x,z/w),j=x*h,k=w*h;s.drawImage(a,($-j)/2,(z-k)/2,j,k)}}}else if(n.gradientColors){const a=s.createLinearGradient(0,0,$,z);a.addColorStop(0,n.gradientColors.start),a.addColorStop(1,n.gradientColors.end),s.fillStyle=a,s.fillRect(0,0,$,z)}else s.fillStyle="#1e293b",s.fillRect(0,0,$,z);[...n.overlays].sort((a,x)=>a.zIndex-x.zIndex).forEach(a=>{s.save();const{w:x,h:w}=J(s,a),h=x*a.scale,j=w*a.scale;if(s.translate(a.x+h/2,a.y+j/2),s.rotate(a.rotation),s.translate(-h/2,-j/2),a.type==="image"){const k=a.sourceUrl?d.current[a.sourceUrl]:null;if(k){const E=a.crop||{t:0,b:0,l:0,r:0},P=k.width*E.l,B=k.height*E.t,V=k.width*(1-E.l-E.r),M=k.height*(1-E.t-E.b);s.drawImage(k,P,B,V,M,0,0,h,j)}}else if(a.type==="text"){const k=a.backgroundPadding||0;a.backgroundColor&&(s.fillStyle=a.backgroundColor,s.globalAlpha=a.backgroundOpacity||.7,s.beginPath(),s.roundRect(0,0,h,j,a.backgroundRadius||10),s.fill()),s.globalAlpha=1,s.save(),s.scale(a.scale,a.scale),s.font=ee(a),s.textBaseline="top",a.strokeColor&&(a.strokeWidth||0)>0&&(s.strokeStyle=a.strokeColor,s.lineWidth=(a.strokeWidth||0)*2,s.lineJoin="round",s.strokeText(a.text||"",k,k)),s.fillStyle=a.color||"#fff",s.fillText(a.text||"",k,k),s.restore()}else a.type==="sticker"&&(s.font=`${j}px sans-serif`,s.textAlign="center",s.textBaseline="middle",s.fillText(a.emoji||"",h/2,j/2));y===a.id&&(s.strokeStyle=i?"#ef4444":"#6366f1",s.lineWidth=4,s.setLineDash(i?[]:[10,5]),s.strokeRect(-2,-2,h+4,j+4),s.setLineDash([]),i&&a.type==="image"?(s.fillStyle="#ef4444",[[0,0,"tl"],[h,0,"tr"],[h,j,"br"],[0,j,"bl"]].forEach(([k,E])=>{s.beginPath(),s.arc(k,E,10,0,Math.PI*2),s.fill()})):i||(s.fillStyle="#6366f1",s.beginPath(),s.arc(h,j,12,0,Math.PI*2),s.fill(),s.fillStyle="#10b981",s.beginPath(),s.arc(h/2,-40,12,0,Math.PI*2),s.fill())),s.restore()})}},[n,y,$,z,C,i]);g.useEffect(()=>{re()},[re]);const te=m=>{const s=f.current.getBoundingClientRect();let a=0,x=0;return"touches"in m?(a=m.touches[0].clientX,x=m.touches[0].clientY):(a=m.clientX,x=m.clientY),{x:(a-s.left)*($/s.width),y:(x-s.top)*(z/s.height)}},ae=m=>{const{x:s,y:a}=te(m),x=f.current.getContext("2d");if(y){const h=n.overlays.find(B=>B.id===y),{w:j,h:k}=J(x,h),E=j*h.scale,P=k*h.scale;if(i&&h.type==="image"){const B=h.x+E/2,V=h.y+P/2,M=-h.rotation,O=s-B,_=a-V,W=O*Math.cos(M)-_*Math.sin(M)+E/2,T=O*Math.sin(M)+_*Math.cos(M)+P/2,se=[{x:0,y:0,id:"tl"},{x:E,y:0,id:"tr"},{x:E,y:P,id:"br"},{x:0,y:P,id:"bl"}];for(const U of se)if(Math.hypot(W-U.x,T-U.y)<40){N("CROP"),H(U.id),Q({x:s,y:a}),q({...h});return}}else if(!i){const B=h.x+E/2,V=h.y+P/2,M=-h.rotation,O=s-B,_=a-V,W=O*Math.cos(M)-_*Math.sin(M)+E/2,T=O*Math.sin(M)+_*Math.cos(M)+P/2;if(Math.hypot(W-E,T-P)<40){N("SCALE"),Q({x:s,y:a}),q({...h});return}if(Math.hypot(W-E/2,T+40)<40){N("ROTATE"),Q({x:s,y:a}),q({...h});return}}}const w=[...n.overlays].reverse().find(h=>{const{w:j,h:k}=J(x,h),E=j*h.scale,P=k*h.scale,B=h.x+E/2,V=h.y+P/2,M=-h.rotation,O=s-B,_=a-V,W=O*Math.cos(M)-_*Math.sin(M)+E/2,T=O*Math.sin(M)+_*Math.cos(M)+P/2;return W>=0&&W<=E&&T>=0&&T<=P});w?(p(w.id),N("MOVE"),Q({x:s,y:a}),q({...w})):p(null)},L=m=>{if(b==="NONE"||!y||!A)return;"touches"in m&&m.cancelable&&m.preventDefault();const{x:s,y:a}=te(m),x=s-G.x,w=a-G.y,h=n.overlays.map(j=>{if(j.id!==y)return j;if(b==="MOVE")return{...j,x:A.x+x,y:A.y+w};if(b==="SCALE"){const k=(x+w)/400;return{...j,scale:Math.max(.1,A.scale+k)}}if(b==="ROTATE"){const k=j.x+J(f.current.getContext("2d"),j).w*j.scale/2,E=j.y+J(f.current.getContext("2d"),j).h*j.scale/2;return{...j,rotation:Math.atan2(a-E,s-k)+Math.PI/2}}if(b==="CROP"){const k=-A.rotation,E=x*Math.cos(k)-w*Math.sin(k),P=x*Math.sin(k)+w*Math.cos(k),B=A.width,V=A.height,M=A.scale,O=A.crop||{t:0,b:0,l:0,r:0},_=B/(1-O.l-O.r),W=V/(1-O.t-O.b);let T={...O},se=0,U=0;if(S!=null&&S.includes("l")){const u=E/(_*M);T.l=Math.min(.9,Math.max(0,O.l+u)),se=(T.l-O.l)*_*M}else if(S!=null&&S.includes("r")){const u=-E/(_*M);T.r=Math.min(.9,Math.max(0,O.r+u))}if(S!=null&&S.includes("t")){const u=P/(W*M);T.t=Math.min(.9,Math.max(0,O.t+u)),U=(T.t-O.t)*W*M}else if(S!=null&&S.includes("b")){const u=-P/(W*M);T.b=Math.min(.9,Math.max(0,O.b+u))}const ie=_*(1-T.l-T.r),le=W*(1-T.t-T.b),ne=A.rotation,ce=se*Math.cos(ne)-U*Math.sin(ne),de=se*Math.sin(ne)+U*Math.cos(ne);return{...j,crop:T,width:ie,height:le,x:A.x+ce,y:A.y+de}}return j});l({overlays:h})},Z=()=>{N("NONE")};return e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-black overflow-hidden touch-none",children:e.jsx("canvas",{ref:f,width:$,height:z,onMouseDown:ae,onMouseMove:L,onMouseUp:Z,onMouseLeave:Z,onTouchStart:ae,onTouchMove:L,onTouchEnd:Z,className:"max-w-full max-h-full object-contain cursor-crosshair touch-none"})})},ve=[{name:"Ê®ôÊ•∑È´î (KaiTi)",value:'"DFKai-SB", "KaiTi", serif'},{name:"ËÉñËÉñÈ´î (Mochiy)",value:'"Mochiy Pop One", sans-serif'},{name:"Á≤âÂúìÈ´î (Huninn)",value:'"jf-openhuninn-1.1", sans-serif'},{name:"Á´•Á´•È´î (Marker)",value:'"LXGW Marker Gothic", sans-serif'},{name:"ÈªûÈô£È´î (Pixel)",value:'"DotGothic16", sans-serif'},{name:"ÈªëÈ´î (Noto Sans)",value:'"Noto Sans TC", sans-serif'}],De=["‚ù§Ô∏è","‚≠ê","üî•","‚ú®","üçÄ","üé®","üöÄ","üì∑","üí°","üåà","üê±","üê∂"],ye=n=>new Promise((R,y)=>{const p=new Image;p.crossOrigin="anonymous",p.onload=()=>{const l=document.createElement("canvas"),i=1280;let f=p.width,d=p.height;f>i&&(d*=i/f,f=i),l.width=f,l.height=d,l.getContext("2d").drawImage(p,0,0,f,d),R(l.toDataURL("image/jpeg",.7))},p.onerror=y,p.src=n}),Se=n=>new Promise((R,y)=>{const p=document.createElement("video");p.src=n,p.muted=!0,p.crossOrigin="anonymous",p.onloadedmetadata=()=>{const l=document.createElement("canvas");l.width=640,l.height=360;const i=l.getContext("2d"),f=l.captureStream(24),d=new MediaRecorder(f,{mimeType:"video/webm;codecs=vp8",videoBitsPerSecond:1e6}),I=[];d.ondataavailable=v=>I.push(v.data),d.onstop=()=>{const v=new Blob(I,{type:"video/webm"}),b=new FileReader;b.onloadend=()=>R(b.result),b.readAsDataURL(v)},p.play(),d.start();const C=()=>{if(p.paused||p.ended){d.stop();return}i.drawImage(p,0,0,l.width,l.height),requestAnimationFrame(C)};C()},p.onerror=y}),Me=n=>typeof n=="string"?Promise.resolve(n):new Promise((R,y)=>{const p=new FileReader;p.onload=()=>R(p.result),p.onerror=y,p.readAsDataURL(n)}),Ue=async(n,R,y,p)=>{const l=R.length+y.length;let i=0;const f=[];for(const N of R){let S="";try{N.type==="video"?S=await Se(N.previewUrl):S=await ye(N.previewUrl)}catch(G){console.error("Failed to compress asset",N.id,G),S=N.previewUrl}const H=[];for(const G of N.overlays)if(G.type==="image"&&G.sourceUrl){const Q=await ye(G.sourceUrl);H.push({...G,sourceUrl:Q})}else H.push(G);f.push({...N,previewUrl:S,overlays:H,file:void 0}),i++,p(Math.floor(i/l*100))}const d=[];for(const N of y){const S=await Me(N.url);d.push({...N,url:S,file:void 0}),i++,p(Math.floor(i/l*100))}const I={version:"1.0",settings:n,media:f,audioTracks:d},C=new Blob([JSON.stringify(I)],{type:"application/json"}),v=URL.createObjectURL(C),b=document.createElement("a");b.href=v,b.download=`${n.outputFileName}_project.ezp`,b.click(),URL.revokeObjectURL(v)},Le=async n=>new Promise((R,y)=>{const p=new FileReader;p.onload=async l=>{var i;try{const f=JSON.parse((i=l.target)==null?void 0:i.result);f.media=f.media.map(d=>{const I=xe(d.previewUrl),C=URL.createObjectURL(I),v=d.overlays.map(b=>{if(b.type==="image"&&b.sourceUrl){const N=xe(b.sourceUrl);return{...b,sourceUrl:URL.createObjectURL(N)}}return b});return{...d,previewUrl:C,overlays:v}}),f.audioTracks=f.audioTracks.map(d=>{const I=xe(d.url);return{...d,url:URL.createObjectURL(I)}}),R(f)}catch(f){y(f)}},p.onerror=y,p.readAsText(n)});function xe(n){const R=atob(n.split(",")[1]),y=n.split(",")[0].split(":")[1].split(";")[0],p=new ArrayBuffer(R.length),l=new Uint8Array(p);for(let i=0;i<R.length;i++)l[i]=R.charCodeAt(i);return new Blob([p],{type:y})}const Oe=fe.lazy(()=>we(()=>import("./VideoPreview-C24NRJXb.js"),__vite__mapDeps([0,1]))),Te={[F.FADE]:"Ê∑°ÂÖ•Ê∑°Âá∫",[F.SLIDE_UP]:"Âêë‰∏äÊªëÂãï",[F.SLIDE_DOWN]:"Âêë‰∏ãÊªëÂãï",[F.SLIDE_LEFT]:"ÂêëÂ∑¶ÊªëÂãï",[F.SLIDE_RIGHT]:"ÂêëÂè≥ÊªëÂãï",[F.ZOOM_IN]:"Á∏ÆÊîæÈÄ≤ÂÖ•",[F.RANDOM]:"Èö®Ê©üËΩâÂ†¥"},he=[{name:"Êô®ÈúßÁÅ∞",start:"#e8eaeb",end:"#9ca6a9"},{name:"Êùè‰ªÅÁôΩ",start:"#f6f0ea",end:"#d0b8ac"},{name:"Èº†Â∞æËçâ",start:"#e6ebe0",end:"#9bc4bc"},{name:"ÈùúË¨êËóç",start:"#e0e7eb",end:"#9fb8cd"},{name:"‰πæÁá•Áé´Áë∞",start:"#f5e6e8",end:"#d4a5a5"},{name:"ÊöñÊ≤ôÈáë",start:"#fdfbf7",end:"#d4c5b0"},{name:"Ê•µÁ∞°Èªë",start:"#2c3e50",end:"#000000"},{name:"Á¥îÊ∑®ÁôΩ",start:"#ffffff",end:"#f0f0f0"}],Pe=()=>{const[n,R]=g.useState(X.EDITING),[y,p]=g.useState("media"),[l,i]=g.useState([]),[f,d]=g.useState([]),[I,C]=g.useState(null),[v,b]=g.useState(null),[N,S]=g.useState(0),[H,G]=g.useState([]),[Q,A]=g.useState(!1),[q,$]=g.useState(!1),[z,ee]=g.useState(0),[J,re]=g.useState(!1),[te,ae]=g.useState(!1),[L,Z]=g.useState({outputFileName:"ÊàëÁöÑÁ≤æÂΩ©ÂΩ±Áâá",aspectRatio:"16:9",photoDuration:3,transitionDuration:1,resolution:{width:1280,height:720},collageTitle:"ÊàëÁöÑÁ≤æÂΩ©ÂõûÊÜ∂",defaultTransition:F.RANDOM}),m=g.useRef(null),s=g.useRef(null),a=g.useRef(null),x=g.useRef(null),w=g.useRef(null),h=g.useRef(null),[j,k]=g.useState(null),E=g.useRef(null);g.useRef(null),g.useEffect(()=>{b(null),$(!1)},[I]),g.useEffect(()=>{if(I){const t=l.findIndex(r=>r.id===I);t!==-1&&t!==N&&S(t)}},[l,I]),g.useEffect(()=>{const t=()=>{if(window.google&&window.google.accounts&&!E.current){console.warn("GOOGLE_CLIENT_ID Êú™Ë®≠ÂÆöÔºåGoogle ÁôªÂÖ•ÂäüËÉΩÂ∞áÁÑ°Ê≥ï‰ΩøÁî®„ÄÇ");return}};t();const r=setInterval(()=>{E.current?clearInterval(r):t()},500);return()=>clearInterval(r)},[]);const P=async t=>{{alert(`„ÄêÁ≥ªÁµ±ÊèêÁ§∫„Äë
Ë´ãÂÖàÂú®ÈÉ®ÁΩ≤Âπ≥Âè∞ (Â¶Ç Netlify) ÁöÑ Environment Variables Ë®≠ÂÆöÔºö
GOOGLE_CLIENT_ID
GOOGLE_API_KEY`);return}},B=async t=>{if(t.target.files&&t.target.files.length>0){ae(!0);const r=Array.from(t.target.files),c=[];try{for(const o of r){let D=o,K="";if(o.name.toLowerCase().endsWith(".heic")||o.name.toLowerCase().endsWith(".heif")||o.type==="image/heic"||o.type==="image/heif")try{const ke=(await we(()=>import("heic2any"),[])).default,ue=await ke({blob:o,toType:"image/jpeg",quality:.8}),ge=Array.isArray(ue)?ue[0]:ue;D=new File([ge],o.name.replace(/\.heic$/i,".jpg"),{type:"image/jpeg"}),K=URL.createObjectURL(ge)}catch(me){console.error("HEIC ËΩâÊèõÂ§±Êïó",me);continue}else K=URL.createObjectURL(o);const pe=D.type.startsWith("video/"),Ne={id:crypto.randomUUID(),type:pe?"video":"image",fileName:D.name,previewUrl:K,file:D,duration:pe?5:L.photoDuration,transition:L.defaultTransition,overlays:[]};c.push(Ne)}i(o=>[...o,...c]),d(o=>[...c,...o])}catch(o){console.error("ÂåØÂÖ•Ê™îÊ°àÊôÇÁôºÁîüÈåØË™§",o)}finally{ae(!1),a.current&&(a.current.value="")}}},V=async()=>{if(l.length===0)return alert("Ê≤íÊúâÁ¥†ÊùêÂèØ‰ª•ÂÑ≤Â≠òÔºÅ");re(!0),ee(0);try{await Ue(L,l,H,ee)}catch(t){alert("ÂÑ≤Â≠òÂ§±ÊïóÔºö"+t)}re(!1)},M=async t=>{var c;const r=(c=t.target.files)==null?void 0:c[0];if(r){re(!0),ee(0);try{const o=await Le(r);Z(o.settings),i(o.media),d([]),G(o.audioTracks),o.media.length>0&&C(o.media[0].id)}catch{alert("ËºâÂÖ•Â∞àÊ°àÂ§±ÊïóÔºåË´ãÁ¢∫‰øùÊ™îÊ°àÊ†ºÂºèÊ≠£Á¢∫ (.ezp)")}re(!1),x.current&&(x.current.value="")}},O=()=>{l.length===0&&f.length===0&&H.length===0||confirm(`Á¢∫ÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâÂÖßÂÆπ‰∏¶ÈáçÊñ∞ÈñãÂßãÂóéÔºü
Ê≠§Âãï‰ΩúÁÑ°Ê≥ïÂæ©ÂéüÔºÅ`)&&(i([]),d([]),G([]),C(null),b(null),S(0),R(X.EDITING),Z({outputFileName:"ÊàëÁöÑÁ≤æÂΩ©ÂΩ±Áâá",aspectRatio:"16:9",photoDuration:3,transitionDuration:1,resolution:{width:1280,height:720},collageTitle:"ÊàëÁöÑÁ≤æÂΩ©ÂõûÊÜ∂",defaultTransition:F.RANDOM}),a.current&&(a.current.value=""),m.current&&(m.current.value=""),x.current&&(x.current.value=""))},_=()=>{const t=crypto.randomUUID(),r={id:t,type:"image",fileName:"Á©∫ÁôΩÊãºË≤º",previewUrl:"",duration:L.photoDuration,transition:F.FADE,overlays:[],gradientColors:he[0]};i(c=>[r,...c]),C(t),S(0)},W=t=>{if(!I){l.some(c=>c.id===t.id)||i(c=>[...c,t]),C(t.id),d(c=>c.filter(o=>o.id!==t.id));return}const r={id:crypto.randomUUID(),type:"image",sourceUrl:t.previewUrl,x:L.resolution.width/2-200,y:L.resolution.height/2-150,width:400,height:300,scale:1,rotation:0,zIndex:50,crop:{t:0,b:0,l:0,r:0}};i(c=>c.map(D=>D.id===I?{...D,overlays:[...D.overlays,r]}:D).filter(D=>D.id===I||D.id!==t.id)),b(r.id),d(c=>c.filter(o=>o.id!==t.id))},T=t=>{const r=l.find(c=>c.id===t);r&&r.fileName!=="Á©∫ÁôΩÊãºË≤º"&&d(c=>c.some(o=>o.id===r.id)?c:[r,...c]),i(c=>c.filter(o=>o.id!==t)),I===t&&C(null)},se=t=>{if(t.target.files){const c=Array.from(t.target.files).map(o=>({file:o,url:URL.createObjectURL(o),name:o.name,duration:30}));G(o=>[...o,...c]),A(!1)}},U=(t,r)=>{if(r.overlays){const c=l.find(o=>o.id===t);c&&c.overlays.filter(D=>{var K;return!((K=r.overlays)!=null&&K.find(oe=>oe.id===D.id))}).forEach(D=>{D.type==="image"&&D.sourceUrl&&d(K=>[{id:crypto.randomUUID(),type:"image",previewUrl:D.sourceUrl,fileName:"ÈÇÑÂéüÁöÑÁ¥†Êùê",duration:L.photoDuration,transition:F.FADE,overlays:[]},...K])})}i(c=>c.map(o=>o.id===t?{...o,...r}:o))},ie=t=>{let r=1280,c=720;t==="4:3"?(r=1024,c=768):t==="9:16"?(r=720,c=1280):t==="1:1"&&(r=1080,c=1080),Z(o=>({...o,aspectRatio:t,resolution:{width:r,height:c}}))},le=(t,r)=>{if(!I)return;const c={id:crypto.randomUUID(),type:t,x:L.resolution.width/2-200,y:L.resolution.height/2-50,width:t==="text"?400:100,height:100,scale:1,rotation:0,zIndex:100,text:t==="text"?"Ë´ãËº∏ÂÖ•ÊñáÂ≠óÂÖßÂÆπ":void 0,emoji:t==="sticker"?r:void 0,fontFamily:ve[0].value,fontSize:60,color:"#ffffff",backgroundColor:"#000000",backgroundOpacity:.7,backgroundPadding:20,backgroundRadius:10,strokeColor:"#000000",strokeWidth:0,animationType:t==="sticker"?"pulse":"none"};i(o=>o.map(D=>D.id===I?{...D,overlays:[...D.overlays,c]}:D)),b(c.id),t==="text"&&p("text")},ne=()=>{if(w.current===null||h.current===null)return;const t=[...l],r=t.splice(w.current,1)[0];t.splice(h.current,0,r),w.current=null,h.current=null,i(t)},ce=()=>{if(l.length===0){alert("Ë´ãÂÖàÊñ∞Â¢ûÂ†¥ÊôØÁ¥†ÊùêÔºÅ");return}R(X.RENDERING),ee(0)},de=t=>{const r=document.createElement("a");r.href=t,r.download=`${L.outputFileName}.webm`,document.body.appendChild(r),r.click(),document.body.removeChild(r),R(X.FINISHED),setTimeout(()=>{R(X.EDITING)},2e3)},u=l.find(t=>t.id===I),Y=u==null?void 0:u.overlays.find(t=>t.id===v);return e.jsxs("div",{className:"fixed inset-0 bg-[#0b0e14] text-slate-100 flex flex-col overflow-hidden font-sans select-none touch-none",children:[e.jsxs("header",{className:"h-14 shrink-0 px-4 md:px-6 flex justify-between items-center bg-[#161b22] border-b border-slate-800/50 z-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center font-black italic text-sm",children:"E"}),e.jsx("h1",{className:"text-lg font-black tracking-tighter italic text-slate-200 uppercase hidden md:block",children:"Easymaker 123"})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("button",{onClick:O,className:"px-3 py-1.5 md:px-4 bg-red-900/20 hover:bg-red-900/40 text-red-400 border border-red-900/50 rounded-full text-[10px] font-black uppercase tracking-widest transition-all active:scale-95",children:"ÈáçÊñ∞ÈñãÂßã"}),e.jsx("button",{onClick:()=>{var t;return(t=x.current)==null?void 0:t.click()},className:"px-3 py-1.5 md:px-4 bg-slate-800 hover:bg-slate-700 rounded-full text-[10px] font-black uppercase tracking-widest border border-slate-700 transition-all active:scale-95",children:"ÈñãÂïü"}),e.jsx("input",{type:"file",ref:x,accept:".ezp",className:"hidden",onChange:M}),e.jsx("button",{onClick:V,className:"px-3 py-1.5 md:px-4 bg-slate-800 hover:bg-slate-700 rounded-full text-[10px] font-black uppercase tracking-widest border border-slate-700 transition-all active:scale-95",children:"ÂÑ≤Â≠ò"}),e.jsx("button",{onClick:ce,disabled:n===X.RENDERING,className:`bg-indigo-600 hover:bg-indigo-500 px-4 md:px-6 py-1.5 rounded-full text-xs font-black shadow-lg shadow-indigo-500/20 transition-all active:scale-95 ${n===X.RENDERING?"opacity-50 cursor-not-allowed":""}`,children:n===X.RENDERING?`${z}%`:"ÂåØÂá∫"})]})]}),e.jsxs("main",{className:"flex-1 flex flex-col md:flex-row overflow-hidden min-h-0 relative",children:[e.jsxs("aside",{className:"order-last md:order-first w-full md:w-[340px] h-[35vh] md:h-full shrink-0 bg-[#161b22] flex flex-col border-t md:border-r border-slate-800/50 overflow-hidden relative z-20",children:[e.jsx("div",{className:"flex border-b border-slate-800/30 shrink-0 md:flex-row order-last md:order-first",children:[{id:"media",icon:"üñºÔ∏è",label:"Â™íÈ´î"},{id:"audio",icon:"üéµ",label:"Èü≥Ê®Ç"},{id:"sticker",icon:"üòä",label:"Ë≤ºÂúñ"},{id:"text",icon:"üìù",label:"ÊñáÂ≠ó"},{id:"settings",icon:"‚öôÔ∏è",label:"Ë®≠ÂÆö"}].map(t=>e.jsxs("button",{onClick:()=>p(t.id),className:`flex-1 flex flex-col items-center py-2 md:py-3 gap-1 transition-all ${y===t.id?"bg-indigo-600/10 text-indigo-400 border-t-2 md:border-t-0 md:border-b-2 border-indigo-500":"text-slate-500 hover:text-slate-300"}`,children:[e.jsx("span",{className:t.id==="text"?"text-sm font-black":"text-lg",children:t.icon}),e.jsx("span",{className:"text-[9px] md:text-[10px] font-bold tracking-widest",children:t.label})]},t.id))}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-5 scrollbar-thin bg-[#161b22]",children:[y==="media"&&e.jsxs("div",{className:"space-y-4 md:space-y-6 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 md:gap-3",children:[e.jsxs("button",{onClick:()=>{var t;return(t=a.current)==null?void 0:t.click()},className:"col-span-2 py-3 md:py-4 bg-slate-800/40 border border-slate-700/50 rounded-2xl flex items-center justify-center gap-2 hover:bg-slate-700/60 transition-all active:scale-95 group",children:[e.jsx("span",{className:"text-xl group-hover:scale-110 transition-transform",children:"üì§"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"ÂåØÂÖ•Êú¨Âú∞"})]}),e.jsxs("button",{onClick:()=>P(),className:"py-2 md:py-3 bg-blue-600/10 border border-blue-500/20 rounded-2xl flex flex-col items-center justify-center gap-1 hover:bg-blue-600/20 transition-all active:scale-95",children:[e.jsx("span",{className:"text-xl",children:"üìÅ"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-blue-400",children:"Drive"})]}),e.jsxs("button",{onClick:()=>P(),className:"py-2 md:py-3 bg-emerald-600/10 border border-emerald-500/20 rounded-2xl flex flex-col items-center justify-center gap-1 hover:bg-emerald-600/20 transition-all active:scale-95",children:[e.jsx("span",{className:"text-xl",children:"üåà"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-emerald-400",children:"Photos"})]}),e.jsxs("button",{onClick:_,className:"col-span-2 py-2 md:py-3 bg-indigo-600/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center gap-2 hover:bg-indigo-600/20 transition-all active:scale-95",children:[e.jsx("span",{className:"text-xl",children:"üß©"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-400",children:"Êñ∞Â¢ûÁ©∫ÁôΩÊãºË≤º"})]})]}),e.jsx("input",{type:"file",ref:a,multiple:!0,accept:"image/*,video/*,.heic,.HEIC",onChange:B,className:"hidden"}),e.jsxs("div",{className:"space-y-2 md:space-y-3 mt-4",children:[e.jsxs("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:["ÂæÖ‰ΩøÁî® (",f.length,")"]}),f.length>0?e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-2 gap-2",children:f.map(t=>e.jsx("div",{className:"aspect-video bg-[#0b0e14] rounded-xl overflow-hidden border border-slate-800 group relative cursor-pointer",onClick:()=>W(t),children:e.jsx("img",{src:t.previewUrl,className:"w-full h-full object-cover transition-transform group-hover:scale-110",alt:""})},t.id))}):e.jsx("div",{className:"py-8 border border-dashed border-slate-800 rounded-2xl flex flex-col items-center justify-center opacity-40 text-center",children:e.jsx("p",{className:"text-[9px] font-bold uppercase",children:"ÁÑ°ÂèØÁî®Á¥†Êùê"})})]})]}),y==="audio"&&e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-left-4 duration-300",children:[e.jsxs("button",{onClick:()=>{var t;return(t=m.current)==null?void 0:t.click()},className:"w-full py-4 bg-slate-800/40 border border-slate-700/50 rounded-2xl flex items-center justify-center gap-3 hover:bg-slate-700 transition-colors",children:[e.jsx("span",{className:"text-xl",children:"üìÅ"}),e.jsx("span",{className:"text-xs font-black",children:"Êú¨Âú∞Èü≥Ê®ÇÂåØÂÖ•"})]}),e.jsxs("button",{onClick:()=>A(!0),className:"w-full py-4 bg-red-600/10 border border-red-500/20 rounded-2xl flex items-center justify-center gap-3 hover:bg-red-600/20 text-red-500 transition-colors",children:[e.jsx("span",{className:"text-xl",children:"üé¨"}),e.jsx("span",{className:"text-xs font-black",children:"YouTube ‰∏ãËºâ"})]}),e.jsx("input",{type:"file",ref:m,accept:"audio/*",className:"hidden",multiple:!0,onChange:se}),H.length>0&&e.jsx("div",{className:"space-y-2 pt-2",children:H.map(t=>e.jsxs("div",{className:"p-3 bg-[#0b0e14] rounded-xl border border-slate-800 flex items-center gap-3 group",children:[e.jsx("span",{className:"text-lg",children:"üéµ"}),e.jsx("span",{className:"text-[10px] font-bold truncate flex-1",children:t.name}),e.jsx("button",{onClick:()=>G(r=>r.filter(c=>c.url!==t.url)),className:"text-red-500 opacity-100 md:opacity-0 group-hover:opacity-100 transition-opacity",children:"‚úï"})]},t.url))})]}),y==="sticker"&&e.jsx("div",{className:"grid grid-cols-4 gap-2 animate-in fade-in duration-300",children:De.map(t=>e.jsx("button",{onClick:()=>le("sticker",t),className:"aspect-square bg-slate-800/40 rounded-xl hover:bg-slate-700 text-2xl flex items-center justify-center transition-all active:scale-90",children:t},t))}),y==="text"&&e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-left-4 duration-300 h-full flex flex-col",children:[e.jsxs("button",{onClick:()=>le("text"),className:"shrink-0 w-full py-3 bg-indigo-600 text-white rounded-2xl text-xs font-black shadow-lg shadow-indigo-500/20 active:scale-95 transition-all flex items-center justify-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:"Ôºã"})," Êñ∞Â¢ûÊñáÂ≠ó"]}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-1 scrollbar-thin",children:Y&&Y.type==="text"?e.jsxs("div",{className:"space-y-4 pt-2 border-t border-slate-800/50",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest",children:"Á∑®ËºØ‰∏≠"}),e.jsx("button",{onClick:()=>{U(u.id,{overlays:u.overlays.filter(t=>t.id!==v)}),b(null)},className:"text-red-500 text-[10px] font-black hover:underline",children:"Âà™Èô§"})]}),e.jsx("div",{className:"space-y-1",children:e.jsx("textarea",{value:Y.text,onChange:t=>U(u.id,{overlays:u.overlays.map(r=>r.id===v?{...r,text:t.target.value}:r)}),className:"w-full bg-[#0b0e14] border border-slate-700 p-2 rounded-xl text-xs font-medium outline-none focus:border-indigo-500",rows:2})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("select",{value:Y.fontFamily,onChange:t=>U(u.id,{overlays:u.overlays.map(r=>r.id===v?{...r,fontFamily:t.target.value}:r)}),className:"w-full bg-[#0b0e14] border border-slate-700 p-2 rounded-xl text-[10px] font-bold focus:border-indigo-500 outline-none",children:ve.map(t=>e.jsx("option",{value:t.value,children:t.name},t.value))}),e.jsx("input",{type:"color",value:Y.color,onChange:t=>U(u.id,{overlays:u.overlays.map(r=>r.id===v?{...r,color:t.target.value}:r)}),className:"w-full h-10 rounded-lg bg-[#0b0e14] border border-slate-700 p-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-[1fr_40px] gap-2 items-center",children:[e.jsx("span",{className:"text-[9px] text-slate-500",children:"Â§ñÊ°Ü"}),e.jsx("input",{type:"color",value:Y.strokeColor,onChange:t=>U(u.id,{overlays:u.overlays.map(r=>r.id===v?{...r,strokeColor:t.target.value}:r)}),className:"w-full h-6 rounded-lg bg-transparent border-none"})]}),e.jsx("input",{type:"range",min:"0",max:"20",value:Y.strokeWidth,onChange:t=>U(u.id,{overlays:u.overlays.map(r=>r.id===v?{...r,strokeWidth:parseInt(t.target.value)}:r)}),className:"w-full h-1 bg-slate-700 rounded-full appearance-none accent-indigo-500"})]}),e.jsxs("div",{className:"space-y-2 pt-3 mt-2 border-t border-slate-800/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:"ÊñáÂ≠óÂ∫ïÊ°Ü"}),Y.backgroundColor&&e.jsx("button",{onClick:()=>U(u.id,{overlays:u.overlays.map(t=>t.id===v?{...t,backgroundColor:""}:t)}),className:"text-[9px] text-red-400 hover:text-red-300",children:"ÁßªÈô§"})]}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-3 items-center",children:[e.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[e.jsx("div",{className:"relative w-8 h-8 rounded-lg overflow-hidden border border-slate-700",children:e.jsx("input",{type:"color",value:Y.backgroundColor||"#000000",onChange:t=>U(u.id,{overlays:u.overlays.map(r=>r.id===v?{...r,backgroundColor:t.target.value}:r)}),className:"absolute inset-[-50%] w-[200%] h-[200%] cursor-pointer"})}),e.jsx("span",{className:"text-[8px] text-slate-500",children:"È°èËâ≤"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[8px] text-slate-500 w-6",children:"ÈÄèÊòé"}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:Y.backgroundOpacity??.7,onChange:t=>U(u.id,{overlays:u.overlays.map(r=>r.id===v?{...r,backgroundOpacity:parseFloat(t.target.value)}:r)}),className:"flex-1 h-1 bg-slate-700 rounded-full appearance-none accent-indigo-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[8px] text-slate-500 w-6",children:"ÂúìËßí"}),e.jsx("input",{type:"range",min:"0",max:"50",value:Y.backgroundRadius??10,onChange:t=>U(u.id,{overlays:u.overlays.map(r=>r.id===v?{...r,backgroundRadius:parseInt(t.target.value)}:r)}),className:"flex-1 h-1 bg-slate-700 rounded-full appearance-none accent-indigo-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[8px] text-slate-500 w-6",children:"ÂÖßË∑ù"}),e.jsx("input",{type:"range",min:"0",max:"50",value:Y.backgroundPadding??20,onChange:t=>U(u.id,{overlays:u.overlays.map(r=>r.id===v?{...r,backgroundPadding:parseInt(t.target.value)}:r)}),className:"flex-1 h-1 bg-slate-700 rounded-full appearance-none accent-indigo-500"})]})]})]})]})]}):e.jsx("div",{className:"flex flex-col items-center justify-center py-10 opacity-40",children:e.jsx("p",{className:"text-[10px] font-black uppercase",children:"Ë´ãÈÅ∏ÊìáÊñáÂ≠ó"})})})]}),y==="settings"&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-left-4 duration-300",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Ê™îÂêç"}),e.jsx("input",{type:"text",value:L.outputFileName,onChange:t=>Z({...L,outputFileName:t.target.value}),className:"w-full bg-[#0b0e14] border border-slate-700 p-2 rounded-xl text-xs font-bold focus:border-indigo-500 outline-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"ÊØî‰æã"}),e.jsx("div",{className:"grid grid-cols-4 gap-1",children:["16:9","4:3","9:16","1:1"].map(t=>e.jsx("button",{onClick:()=>ie(t),className:`py-1.5 px-1 rounded-lg text-[9px] font-black border transition-all ${L.aspectRatio===t?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800/40 border-slate-700 text-slate-400"}`,children:t},t))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"ÁÖßÁâáÁßíÊï∏"}),e.jsxs("span",{className:"text-xs font-black text-indigo-400",children:[L.photoDuration,"s"]})]}),e.jsx("input",{type:"range",min:"1",max:"10",step:"0.5",value:L.photoDuration,onChange:t=>Z({...L,photoDuration:parseFloat(t.target.value)}),className:"w-full h-1 bg-slate-700 rounded-full appearance-none accent-indigo-500"})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-800/50 space-y-2",children:[e.jsx("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Ê≥ïÂæãË≥áË®ä"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("a",{href:"privacy.html",target:"_blank",rel:"noreferrer",className:"text-xs font-bold text-slate-400 hover:text-indigo-400 transition-colors flex items-center gap-2 px-2 py-2 rounded-lg hover:bg-slate-800/50",children:[e.jsx("span",{children:"üõ°Ô∏è"})," Èö±ÁßÅÊ¨äÊîøÁ≠ñ"]}),e.jsxs("a",{href:"terms.html",target:"_blank",rel:"noreferrer",className:"text-xs font-bold text-slate-400 hover:text-indigo-400 transition-colors flex items-center gap-2 px-2 py-2 rounded-lg hover:bg-slate-800/50",children:[e.jsx("span",{children:"‚öñÔ∏è"})," ÊúçÂãôÊ¢ùÊ¨æ"]})]})]})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-[#0b0e14] h-full overflow-hidden relative order-first md:order-last",children:[e.jsxs("div",{className:"flex-1 p-4 md:p-8 flex items-center justify-center relative min-h-0 bg-[#0b0e14]",children:[e.jsxs("div",{className:"absolute top-2 left-4 md:top-6 md:left-8 z-10 flex flex-col gap-2 transition-opacity duration-500 opacity-100 pointer-events-none",children:[e.jsxs("div",{className:"px-3 py-1 bg-[#161b22]/90 backdrop-blur-md border border-slate-800/50 rounded-full flex items-center gap-2 shadow-2xl w-fit pointer-events-auto",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"}),e.jsxs("span",{className:"text-[9px] md:text-[10px] font-black text-slate-300 uppercase tracking-[0.2em]",children:[N+1," / ",l.length]})]}),u&&u.type==="image"&&e.jsx("button",{onClick:()=>$(!q),className:`px-3 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest transition-all shadow-xl pointer-events-auto w-fit ${q?"bg-red-500 text-white":"bg-slate-800 text-slate-300 hover:bg-slate-700"}`,children:q?"‚èπÔ∏è ÈÄÄÂá∫Ë£ÅÂâ™":"‚úÇÔ∏è Ë£ÅÂâ™"})]}),e.jsxs("div",{className:"flex items-center gap-6 h-full w-full justify-center",children:[e.jsx("div",{className:"w-full h-full max-w-[960px] aspect-video bg-black rounded-xl md:rounded-[3rem] overflow-hidden transition-all duration-700 relative group/canvas shadow-[0_0_50px_rgba(0,0,0,0.5)] border-[4px] md:border-[12px] border-[#161b22]",children:n===X.RENDERING?e.jsx(g.Suspense,{fallback:e.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-500 font-bold",children:"ËºâÂÖ•È†êË¶ΩÂÖÉ‰ª∂‰∏≠..."}),children:e.jsx(Oe,{mediaList:l,audio:H,settings:L,appState:n,onRenderingComplete:de,onProgress:ee,setSelectedOverlayId:b})}):u?e.jsx(Ce,{item:u,settings:L,selectedOverlayId:v,setSelectedOverlayId:b,isCropMode:q,onUpdate:t=>U(u.id,t)}):e.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center gap-6 bg-gradient-to-br from-[#0b0e14] to-slate-900",children:e.jsx("span",{className:"text-4xl opacity-20",children:"üé®"})})}),e.jsx("div",{className:"hidden md:block",children:u&&u.fileName==="Á©∫ÁôΩÊãºË≤º"&&e.jsxs("div",{className:"w-[180px] shrink-0 bg-[#161b22]/90 backdrop-blur-md rounded-[2rem] p-4 flex flex-col gap-4 border border-slate-800/50 shadow-2xl h-[400px] animate-in slide-in-from-right-8 duration-500",children:[e.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest text-center py-2 border-b border-slate-700/50",children:"üé® Ëé´Ëò≠Ëø™ËÉåÊôØ"}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1 scrollbar-thin",children:he.map((t,r)=>{var c;return e.jsx("button",{onClick:()=>U(u.id,{gradientColors:t}),className:`w-full aspect-video rounded-xl transition-all hover:scale-105 active:scale-95 border-2 relative overflow-hidden group ${((c=u.gradientColors)==null?void 0:c.name)===t.name?"border-white shadow-lg":"border-transparent hover:border-slate-500"}`,style:{background:`linear-gradient(135deg, ${t.start}, ${t.end})`}},r)})})]})})]})]}),e.jsxs("div",{className:"h-28 md:h-48 shrink-0 bg-[#161b22] border-t border-slate-800/50 flex flex-col px-4 md:px-8 py-3 md:py-5 z-20 transition-all duration-500",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 md:mb-4 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-[9px] md:text-[10px] text-slate-300 font-black tracking-widest uppercase",children:"ÊôÇÈñìËª∏"}),e.jsx("div",{className:"h-3 w-[1px] bg-slate-800"}),e.jsxs("span",{className:"text-[9px] md:text-[10px] text-slate-500 font-bold tracking-widest uppercase",children:[l.reduce((t,r)=>t+(r.type==="video"?r.duration||5:L.photoDuration),0).toFixed(1),"s"]})]}),u&&u.fileName==="Á©∫ÁôΩÊãºË≤º"&&e.jsxs("div",{className:"flex items-center gap-2 md:hidden overflow-x-auto scrollbar-thin max-w-[60%] pb-1",children:[e.jsx("span",{className:"text-[8px] text-slate-500 font-black shrink-0",children:"ËÉåÊôØ"}),he.map((t,r)=>{var c;return e.jsx("button",{onClick:()=>U(u.id,{gradientColors:t}),className:`w-6 h-6 rounded-full shrink-0 border-2 transition-transform ${((c=u.gradientColors)==null?void 0:c.name)===t.name?"border-white scale-110 shadow-md":"border-slate-700/50"}`,style:{background:`linear-gradient(135deg, ${t.start}, ${t.end})`},title:t.name},r)})]})]}),e.jsxs("div",{className:"flex-1 flex gap-2 md:gap-4 overflow-x-auto pb-2 scrollbar-thin min-h-0 items-center",children:[l.map((t,r)=>{var c;return e.jsxs(fe.Fragment,{children:[e.jsxs("div",{draggable:!0,onDragStart:()=>w.current=r,onDragEnter:()=>h.current=r,onDragEnd:ne,onDragOver:o=>o.preventDefault(),onClick:()=>{C(t.id),S(r)},className:`relative shrink-0 h-full aspect-video rounded-lg md:rounded-2xl border-2 md:border-4 transition-all overflow-hidden cursor-pointer md:cursor-move group/thumb ${I===t.id?"border-indigo-600 ring-2 ring-indigo-500/20 z-10 scale-105 shadow-xl":"border-slate-800 opacity-60 hover:opacity-100 hover:border-slate-700"}`,style:t.fileName==="Á©∫ÁôΩÊãºË≤º"&&t.gradientColors?{background:`linear-gradient(135deg, ${t.gradientColors.start}, ${t.gradientColors.end})`}:{},children:[t.previewUrl?e.jsx("img",{src:t.previewUrl,className:"w-full h-full object-cover pointer-events-none",alt:""}):!t.gradientColors&&e.jsx("div",{className:"w-full h-full bg-slate-900 flex items-center justify-center text-xl pointer-events-none",children:"üß©"}),e.jsx("div",{className:"absolute bottom-1 left-1 px-1.5 py-0.5 bg-black/70 backdrop-blur-md rounded text-[8px] font-black text-white",children:r+1}),e.jsx("button",{onClick:o=>{o.stopPropagation(),T(t.id)},className:"absolute top-1 right-1 bg-red-600/90 text-white w-5 h-5 md:w-7 md:h-7 rounded-full text-[8px] md:text-[10px] flex items-center justify-center shadow-lg opacity-100 md:opacity-0 group-hover/thumb:opacity-100 transition-opacity",children:"‚úï"})]}),r<l.length-1&&e.jsx("div",{className:"shrink-0 flex items-center justify-center relative w-4 md:w-8 z-10",children:e.jsxs("button",{onClick:o=>{o.stopPropagation();const D=Object.values(F),K=D.indexOf(t.transition||F.RANDOM),oe=D[(K+1)%D.length];U(t.id,{transition:oe})},className:"w-5 h-5 md:w-6 md:h-6 rounded-full bg-slate-800 border border-slate-600 hover:border-indigo-500 hover:bg-indigo-600 flex items-center justify-center transition-all z-20 shadow-lg active:scale-90 group/trans",title:`ÁõÆÂâçËΩâÂ†¥: ${Te[t.transition||F.RANDOM]}`,children:[e.jsx("span",{className:"text-[8px] text-slate-400 hover:text-white group-hover/trans:hidden",children:"‚ö°"}),e.jsx("span",{className:"text-[7px] text-white hidden group-hover/trans:block font-black uppercase",children:t.transition===F.RANDOM?"R":(c=t.transition)==null?void 0:c.charAt(0)})]})})]},t.id)}),e.jsx("button",{onClick:_,className:"shrink-0 h-full aspect-video bg-[#0b0e14] border-2 border-dashed border-slate-800 rounded-lg md:rounded-3xl flex flex-col items-center justify-center gap-1 text-slate-600 hover:text-indigo-400 hover:border-indigo-600 transition-all hover:bg-slate-800/10 group active:scale-95",children:e.jsx("span",{className:"text-xl md:text-3xl group-hover:scale-110 transition-transform",children:"Ôºã"})})]})]})]})]}),Q&&e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/95 flex items-center justify-center p-4 md:p-12 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-[#161b22] w-full max-w-5xl h-[85vh] rounded-[2rem] md:rounded-[4rem] flex flex-col overflow-hidden border border-slate-800 shadow-[0_0_150px_rgba(0,0,0,0.8)]",children:[e.jsxs("div",{className:"p-4 md:p-8 flex justify-between items-center bg-[#0b0e14]/50 border-b border-slate-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsx("span",{className:"text-2xl md:text-3xl",children:"üì•"}),e.jsx("h2",{className:"font-black text-xs md:text-sm uppercase tracking-[0.3em]",children:"YouTube ÂåØÂÖ•"})]}),e.jsx("button",{onClick:()=>A(!1),className:"w-8 h-8 md:w-12 md:h-12 rounded-full hover:bg-slate-800 flex items-center justify-center text-slate-500 hover:text-white transition-all active:scale-90",children:"‚úï"})]}),e.jsx("iframe",{src:"https://ezconv.cc/",className:"flex-1 bg-white"}),e.jsxs("div",{className:"p-6 md:p-10 bg-[#0b0e14] flex flex-col items-center gap-4 md:gap-6",children:[e.jsx("button",{onClick:()=>{var t;return(t=s.current)==null?void 0:t.click()},className:"px-8 md:px-16 py-3 md:py-4 bg-red-600 hover:bg-red-500 text-white font-black rounded-full text-xs transition-all active:scale-95 shadow-2xl shadow-red-600/30 uppercase tracking-[0.2em]",children:"ÈÅ∏Âèñ‰∏ãËºâÊ™îÊ°à"}),e.jsx("input",{type:"file",accept:"audio/*",ref:s,onChange:se,className:"hidden"})]})]})}),(n===X.RENDERING||J||te)&&e.jsxs("div",{className:"fixed inset-0 z-[200] bg-[#0b0e14] flex flex-col items-center justify-center gap-8 p-12",children:[e.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 bg-indigo-600 rounded-[2.5rem] flex items-center justify-center text-4xl md:text-5xl shadow-2xl shadow-indigo-600/40 animate-pulse",children:te?"‚òÅÔ∏è":J?"üìÅ":"‚öôÔ∏è"}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h2",{className:"text-lg md:text-2xl font-black uppercase tracking-[0.4em]",children:te?"ËôïÁêÜ‰∏≠":J?"Â∞àÊ°àËôïÁêÜ‰∏≠":"ÂåØÂá∫‰∏≠"}),!te&&e.jsxs("span",{className:"text-indigo-400 font-black text-xl tabular-nums",children:[z,"%"]}),te&&e.jsx("button",{onClick:()=>ae(!1),className:"mt-8 px-6 py-2 bg-slate-800 border border-slate-700 rounded-full text-xs font-bold text-slate-400 hover:text-white hover:bg-slate-700 transition-all",children:"ÂèñÊ∂à / ÈóúÈñâ"})]})]}),n===X.FINISHED&&e.jsxs("div",{className:"fixed inset-0 z-[200] bg-[#0b0e14] flex flex-col items-center justify-center gap-6",children:[e.jsx("div",{className:"w-24 h-24 bg-emerald-500 rounded-full flex items-center justify-center text-4xl shadow-2xl shadow-emerald-500/30",children:"‚ú®"}),e.jsx("h2",{className:"text-xl md:text-2xl font-black uppercase tracking-[0.3em]",children:"ÂÆåÊàêÔºÅ"})]})]})},je=document.getElementById("root");if(!je)throw new Error("Could not find root element to mount to");const Ae=Ee.createRoot(je);Ae.render(e.jsx(fe.StrictMode,{children:e.jsx(Pe,{})}));export{X as A,F as T};
