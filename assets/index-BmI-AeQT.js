const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/VideoPreview-DXY4zphr.js","assets/vendor-r3Eagn9n.js"])))=>i.map(i=>d[i]);
import{r as m,j as e,R as ye,a as De}from"./vendor-r3Eagn9n.js";(function(){const I=document.createElement("link").relList;if(I&&I.supports&&I.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))x(i);new MutationObserver(i=>{for(const d of i)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&x(h)}).observe(document,{childList:!0,subtree:!0});function j(i){const d={};return i.integrity&&(d.integrity=i.integrity),i.referrerPolicy&&(d.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?d.credentials="include":i.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function x(i){if(i.ep)return;i.ep=!0;const d=j(i);fetch(i.href,d)}})();const Se="modulepreload",Ue=function(n){return"/"+n},we={},ke=function(I,j,x){let i=Promise.resolve();if(j&&j.length>0){let h=function(D){return Promise.all(D.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),R=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=h(j.map(D=>{if(D=Ue(D),D in we)return;we[D]=!0;const y=D.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${D}"]${v}`))return;const k=document.createElement("link");if(k.rel=y?"stylesheet":Se,y||(k.as="script"),k.crossOrigin="",k.href=D,R&&k.setAttribute("nonce",R),document.head.appendChild(k),y)return new Promise((S,B)=>{k.addEventListener("load",S),k.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${D}`)))})}))}function d(h){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=h,window.dispatchEvent(u),!u.defaultPrevented)throw h}return i.then(h=>{for(const u of h||[])u.status==="rejected"&&d(u.reason);return I().catch(d)})};var _=(n=>(n.FADE="FADE",n.SLIDE_UP="SLIDE_UP",n.SLIDE_DOWN="SLIDE_DOWN",n.SLIDE_LEFT="SLIDE_LEFT",n.SLIDE_RIGHT="SLIDE_RIGHT",n.ZOOM_IN="ZOOM_IN",n.RANDOM="RANDOM",n))(_||{}),K=(n=>(n.IDLE="IDLE",n.COLLAGE="COLLAGE",n.EDITING="EDITING",n.RENDERING="RENDERING",n.FINISHED="FINISHED",n))(K||{});const Le=({item:n,settings:I,selectedOverlayId:j,setSelectedOverlayId:x,onUpdate:i,isCropMode:d})=>{const h=m.useRef(null),u=m.useRef({}),R=m.useRef(""),[D,y]=m.useState(0),[v,k]=m.useState("NONE"),[S,B]=m.useState(null),[F,te]=m.useState({x:0,y:0}),[T,Z]=m.useState(null),Y=I.resolution.width,V=I.resolution.height;m.useEffect(()=>{if(n.file||!h.current)return;const c=setInterval(()=>{if(v!=="NONE")return;const s=h.current.toDataURL("image/jpeg",.3);s.length!==R.current.length&&(R.current=s,i({previewUrl:s}))},2e3);return()=>clearInterval(c)},[n.id,n.file,i,v]),m.useEffect(()=>{const c=[];if(n.file&&n.previewUrl&&!u.current[n.previewUrl]&&c.push({key:n.previewUrl,url:n.previewUrl,type:n.type}),n.overlays.forEach(a=>{a.type==="image"&&a.sourceUrl&&!u.current[a.sourceUrl]&&c.push({key:a.sourceUrl,url:a.sourceUrl,type:"image"})}),c.length===0)return;let s=0;c.forEach(a=>{if(a.type==="video"){const p=document.createElement("video");p.src=a.url,p.muted=!0,p.onloadeddata=()=>{u.current[a.key]=p,s++,s===c.length&&y(w=>w+1)},p.onerror=()=>{s++,s===c.length&&y(w=>w+1)},p.load()}else{const p=new Image;p.src=a.url,p.onload=()=>{u.current[a.key]=p,s++,s===c.length&&y(w=>w+1)},p.onerror=()=>{s++,s===c.length&&y(w=>w+1)}}})},[n.id,n.overlays.length,n.type,n.file]);const se=c=>{var p,w;return`${((p=c.fontFamily)==null?void 0:p.includes("KaiTi"))||((w=c.fontFamily)==null?void 0:w.includes("Noto"))?"bold":"normal"} ${c.fontSize}px ${c.fontFamily}`},Q=(c,s)=>{let a=s.width,p=s.height;if(s.type==="text"){c.font=se(s);const w=c.measureText(s.text||""),f=s.backgroundPadding||0;a=w.width+f*2,p=(s.fontSize||60)+f*2}return{w:a,h:p}},ne=m.useCallback(()=>{const c=h.current;if(!c)return;const s=c.getContext("2d");if(s){if(s.clearRect(0,0,Y,V),n.file){s.fillStyle="#0b0e14",s.fillRect(0,0,Y,V);const a=u.current[n.previewUrl];if(a){const p=a instanceof HTMLVideoElement?a.videoWidth:a.width,w=a instanceof HTMLVideoElement?a.videoHeight:a.height;if(p>0&&w>0){const f=Math.max(Y/p,V/w),b=p*f,N=w*f;s.drawImage(a,(Y-b)/2,(V-N)/2,b,N)}}}else if(n.gradientColors){const a=s.createLinearGradient(0,0,Y,V);a.addColorStop(0,n.gradientColors.start),a.addColorStop(1,n.gradientColors.end),s.fillStyle=a,s.fillRect(0,0,Y,V)}else s.fillStyle="#1e293b",s.fillRect(0,0,Y,V);[...n.overlays].sort((a,p)=>a.zIndex-p.zIndex).forEach(a=>{s.save();const{w:p,h:w}=Q(s,a),f=p*a.scale,b=w*a.scale;if(s.translate(a.x+f/2,a.y+b/2),s.rotate(a.rotation),s.translate(-f/2,-b/2),a.type==="image"){const N=a.sourceUrl?u.current[a.sourceUrl]:null;if(N){const E=a.crop||{t:0,b:0,l:0,r:0},O=N.width*E.l,A=N.height*E.t,W=N.width*(1-E.l-E.r),U=N.height*(1-E.t-E.b);s.drawImage(N,O,A,W,U,0,0,f,b)}}else if(a.type==="text"){const N=a.backgroundPadding||0;a.backgroundColor&&(s.fillStyle=a.backgroundColor,s.globalAlpha=a.backgroundOpacity||.7,s.beginPath(),s.roundRect(0,0,f,b,a.backgroundRadius||10),s.fill()),s.globalAlpha=1,s.save(),s.scale(a.scale,a.scale),s.font=se(a),s.textBaseline="top",a.strokeColor&&(a.strokeWidth||0)>0&&(s.strokeStyle=a.strokeColor,s.lineWidth=(a.strokeWidth||0)*2,s.lineJoin="round",s.strokeText(a.text||"",N,N)),s.fillStyle=a.color||"#fff",s.fillText(a.text||"",N,N),s.restore()}else a.type==="sticker"&&(s.font=`${b}px sans-serif`,s.textAlign="center",s.textBaseline="middle",s.fillText(a.emoji||"",f/2,b/2));j===a.id&&(s.strokeStyle=d?"#ef4444":"#6366f1",s.lineWidth=4,s.setLineDash(d?[]:[10,5]),s.strokeRect(-2,-2,f+4,b+4),s.setLineDash([]),d&&a.type==="image"?(s.fillStyle="#ef4444",[[0,0,"tl"],[f,0,"tr"],[f,b,"br"],[0,b,"bl"]].forEach(([N,E])=>{s.beginPath(),s.arc(N,E,10,0,Math.PI*2),s.fill()})):d||(s.fillStyle="#6366f1",s.beginPath(),s.arc(f,b,12,0,Math.PI*2),s.fill(),s.fillStyle="#10b981",s.beginPath(),s.arc(f/2,-40,12,0,Math.PI*2),s.fill())),s.restore()})}},[n,j,Y,V,D,d]);m.useEffect(()=>{ne()},[ne]);const re=c=>{const s=h.current.getBoundingClientRect();let a=0,p=0;return"touches"in c?(a=c.touches[0].clientX,p=c.touches[0].clientY):(a=c.clientX,p=c.clientY),{x:(a-s.left)*(Y/s.width),y:(p-s.top)*(V/s.height)}},G=c=>{const{x:s,y:a}=re(c),p=h.current.getContext("2d");if(j){const f=n.overlays.find(A=>A.id===j),{w:b,h:N}=Q(p,f),E=b*f.scale,O=N*f.scale;if(d&&f.type==="image"){const A=f.x+E/2,W=f.y+O/2,U=-f.rotation,L=s-A,$=a-W,H=L*Math.cos(U)-$*Math.sin(U)+E/2,M=L*Math.sin(U)+$*Math.cos(U)+O/2,oe=[{x:0,y:0,id:"tl"},{x:E,y:0,id:"tr"},{x:E,y:O,id:"br"},{x:0,y:O,id:"bl"}];for(const q of oe)if(Math.hypot(H-q.x,M-q.y)<40){k("CROP"),B(q.id),te({x:s,y:a}),Z({...f});return}}else if(!d){const A=f.x+E/2,W=f.y+O/2,U=-f.rotation,L=s-A,$=a-W,H=L*Math.cos(U)-$*Math.sin(U)+E/2,M=L*Math.sin(U)+$*Math.cos(U)+O/2;if(Math.hypot(H-E,M-O)<40){k("SCALE"),te({x:s,y:a}),Z({...f});return}if(Math.hypot(H-E/2,M+40)<40){k("ROTATE"),te({x:s,y:a}),Z({...f});return}}}const w=[...n.overlays].reverse().find(f=>{const{w:b,h:N}=Q(p,f),E=b*f.scale,O=N*f.scale,A=f.x+E/2,W=f.y+O/2,U=-f.rotation,L=s-A,$=a-W,H=L*Math.cos(U)-$*Math.sin(U)+E/2,M=L*Math.sin(U)+$*Math.cos(U)+O/2;return H>=0&&H<=E&&M>=0&&M<=O});w?(x(w.id),k("MOVE"),te({x:s,y:a}),Z({...w})):x(null)},le=c=>{if(v==="NONE"||!j||!T)return;"touches"in c&&c.cancelable&&c.preventDefault();const{x:s,y:a}=re(c),p=s-F.x,w=a-F.y,f=n.overlays.map(b=>{if(b.id!==j)return b;if(v==="MOVE")return{...b,x:T.x+p,y:T.y+w};if(v==="SCALE"){const N=(p+w)/400;return{...b,scale:Math.max(.1,T.scale+N)}}if(v==="ROTATE"){const N=b.x+Q(h.current.getContext("2d"),b).w*b.scale/2,E=b.y+Q(h.current.getContext("2d"),b).h*b.scale/2;return{...b,rotation:Math.atan2(a-E,s-N)+Math.PI/2}}if(v==="CROP"){const N=-T.rotation,E=p*Math.cos(N)-w*Math.sin(N),O=p*Math.sin(N)+w*Math.cos(N),A=T.width,W=T.height,U=T.scale,L=T.crop||{t:0,b:0,l:0,r:0},$=A/(1-L.l-L.r),H=W/(1-L.t-L.b);let M={...L},oe=0,q=0;if(S!=null&&S.includes("l")){const J=E/($*U);M.l=Math.min(.9,Math.max(0,L.l+J)),oe=(M.l-L.l)*$*U}else if(S!=null&&S.includes("r")){const J=-E/($*U);M.r=Math.min(.9,Math.max(0,L.r+J))}if(S!=null&&S.includes("t")){const J=O/(H*U);M.t=Math.min(.9,Math.max(0,L.t+J)),q=(M.t-L.t)*H*U}else if(S!=null&&S.includes("b")){const J=-O/(H*U);M.b=Math.min(.9,Math.max(0,L.b+J))}const xe=$*(1-M.l-M.r),pe=H*(1-M.t-M.b),ie=T.rotation,P=oe*Math.cos(ie)-q*Math.sin(ie),me=oe*Math.sin(ie)+q*Math.cos(ie);return{...b,crop:M,width:xe,height:pe,x:T.x+P,y:T.y+me}}return b});i({overlays:f})},ce=()=>{k("NONE")};return e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-black overflow-hidden touch-none",children:e.jsx("canvas",{ref:h,width:Y,height:V,onMouseDown:G,onMouseMove:le,onMouseUp:ce,onMouseLeave:ce,onTouchStart:G,onTouchMove:le,onTouchEnd:ce,className:"max-w-full max-h-full object-contain cursor-crosshair touch-none"})})},Ne=[{name:"Ê®ôÊ•∑È´î (KaiTi)",value:'"DFKai-SB", "KaiTi", serif'},{name:"ËÉñËÉñÈ´î (Mochiy)",value:'"Mochiy Pop One", sans-serif'},{name:"Á≤âÂúìÈ´î (Huninn)",value:'"jf-openhuninn-1.1", sans-serif'},{name:"Á´•Á´•È´î (Marker)",value:'"LXGW Marker Gothic", sans-serif'},{name:"ÈªûÈô£È´î (Pixel)",value:'"DotGothic16", sans-serif'},{name:"ÈªëÈ´î (Noto Sans)",value:'"Noto Sans TC", sans-serif'}],Me=["‚ù§Ô∏è","‚≠ê","üî•","‚ú®","üçÄ","üé®","üöÄ","üì∑","üí°","üåà","üê±","üê∂"],je=n=>new Promise((I,j)=>{const x=new Image;x.crossOrigin="anonymous",x.onload=()=>{const i=document.createElement("canvas"),d=1280;let h=x.width,u=x.height;h>d&&(u*=d/h,h=d),i.width=h,i.height=u,i.getContext("2d").drawImage(x,0,0,h,u),I(i.toDataURL("image/jpeg",.7))},x.onerror=j,x.src=n}),Oe=n=>new Promise((I,j)=>{const x=document.createElement("video");x.src=n,x.muted=!0,x.crossOrigin="anonymous",x.onloadedmetadata=()=>{const i=document.createElement("canvas");i.width=640,i.height=360;const d=i.getContext("2d"),h=i.captureStream(24),u=new MediaRecorder(h,{mimeType:"video/webm;codecs=vp8",videoBitsPerSecond:1e6}),R=[];u.ondataavailable=y=>R.push(y.data),u.onstop=()=>{const y=new Blob(R,{type:"video/webm"}),v=new FileReader;v.onloadend=()=>I(v.result),v.readAsDataURL(y)},x.play(),u.start();const D=()=>{if(x.paused||x.ended){u.stop();return}d.drawImage(x,0,0,i.width,i.height),requestAnimationFrame(D)};D()},x.onerror=j}),Ae=n=>typeof n=="string"?Promise.resolve(n):new Promise((I,j)=>{const x=new FileReader;x.onload=()=>I(x.result),x.onerror=j,x.readAsDataURL(n)}),Pe=async(n,I,j,x)=>{const i=I.length+j.length;let d=0;const h=[];for(const k of I){let S="";try{k.type==="video"?S=await Oe(k.previewUrl):S=await je(k.previewUrl)}catch(F){console.error("Failed to compress asset",k.id,F),S=k.previewUrl}const B=[];for(const F of k.overlays)if(F.type==="image"&&F.sourceUrl){const te=await je(F.sourceUrl);B.push({...F,sourceUrl:te})}else B.push(F);h.push({...k,previewUrl:S,overlays:B,file:void 0}),d++,x(Math.floor(d/i*100))}const u=[];for(const k of j){const S=await Ae(k.url);u.push({...k,url:S,file:void 0}),d++,x(Math.floor(d/i*100))}const R={version:"1.0",settings:n,media:h,audioTracks:u},D=new Blob([JSON.stringify(R)],{type:"application/json"}),y=URL.createObjectURL(D),v=document.createElement("a");v.href=y,v.download=`${n.outputFileName}_project.ezp`,v.click(),URL.revokeObjectURL(y)},Te=async n=>new Promise((I,j)=>{const x=new FileReader;x.onload=async i=>{var d;try{const h=JSON.parse((d=i.target)==null?void 0:d.result);h.media=h.media.map(u=>{const R=be(u.previewUrl),D=URL.createObjectURL(R),y=u.overlays.map(v=>{if(v.type==="image"&&v.sourceUrl){const k=be(v.sourceUrl);return{...v,sourceUrl:URL.createObjectURL(k)}}return v});return{...u,previewUrl:D,overlays:y}}),h.audioTracks=h.audioTracks.map(u=>{const R=be(u.url);return{...u,url:URL.createObjectURL(R)}}),I(h)}catch(h){j(h)}},x.onerror=j,x.readAsText(n)});function be(n){const I=atob(n.split(",")[1]),j=n.split(",")[0].split(":")[1].split(";")[0],x=new ArrayBuffer(I.length),i=new Uint8Array(x);for(let d=0;d<I.length;d++)i[d]=I.charCodeAt(d);return new Blob([x],{type:j})}const _e=ye.lazy(()=>ke(()=>import("./VideoPreview-DXY4zphr.js"),__vite__mapDeps([0,1]))),Fe="208217318300-e58p9c688o3n0f11rpm9bnntnhqrp18a.apps.googleusercontent.com",Ge="AIzaSyAo41JycYePmA6kE841jJ9-fk4BUMKLao8",$e=Fe,We=Ge,He={[_.FADE]:"Ê∑°ÂÖ•Ê∑°Âá∫",[_.SLIDE_UP]:"Âêë‰∏äÊªëÂãï",[_.SLIDE_DOWN]:"Âêë‰∏ãÊªëÂãï",[_.SLIDE_LEFT]:"ÂêëÂ∑¶ÊªëÂãï",[_.SLIDE_RIGHT]:"ÂêëÂè≥ÊªëÂãï",[_.ZOOM_IN]:"Á∏ÆÊîæÈÄ≤ÂÖ•",[_.RANDOM]:"Èö®Ê©üËΩâÂ†¥"},ve=[{name:"Êô®ÈúßÁÅ∞",start:"#e8eaeb",end:"#9ca6a9"},{name:"Êùè‰ªÅÁôΩ",start:"#f6f0ea",end:"#d0b8ac"},{name:"Èº†Â∞æËçâ",start:"#e6ebe0",end:"#9bc4bc"},{name:"ÈùúË¨êËóç",start:"#e0e7eb",end:"#9fb8cd"},{name:"‰πæÁá•Áé´Áë∞",start:"#f5e6e8",end:"#d4a5a5"},{name:"ÊöñÊ≤ôÈáë",start:"#fdfbf7",end:"#d4c5b0"},{name:"Ê•µÁ∞°Èªë",start:"#2c3e50",end:"#000000"},{name:"Á¥îÊ∑®ÁôΩ",start:"#ffffff",end:"#f0f0f0"}],ze=()=>{const[n,I]=m.useState(K.EDITING),[j,x]=m.useState("media"),[i,d]=m.useState([]),[h,u]=m.useState([]),[R,D]=m.useState(null),[y,v]=m.useState(null),[k,S]=m.useState(0),[B,F]=m.useState([]),[te,T]=m.useState(!1),[Z,Y]=m.useState(!1),[V,se]=m.useState(0),[Q,ne]=m.useState(!1),[re,G]=m.useState(!1),[le,ce]=m.useState(!1),[c,s]=m.useState({outputFileName:"ÊàëÁöÑÁ≤æÂΩ©ÂΩ±Áâá",aspectRatio:"16:9",photoDuration:3,transitionDuration:1,resolution:{width:1280,height:720},collageTitle:"ÊàëÁöÑÁ≤æÂΩ©ÂõûÊÜ∂",defaultTransition:_.RANDOM}),a=m.useRef(null),p=m.useRef(null),w=m.useRef(null),f=m.useRef(null),b=m.useRef(null),N=m.useRef(null),[E,O]=m.useState(null),A=m.useRef(null),W=m.useRef(null);m.useEffect(()=>{v(null),Y(!1)},[R]),m.useEffect(()=>{if(R){const t=i.findIndex(r=>r.id===R);t!==-1&&t!==k&&S(t)}},[i,R]),m.useEffect(()=>{const t=()=>{if(window.google&&window.google.accounts&&!A.current)try{A.current=google.accounts.oauth2.initTokenClient({client_id:$e,scope:"https://www.googleapis.com/auth/drive.readonly https://www.googleapis.com/auth/photoslibrary.readonly",callback:l=>{if(l.error){console.error("Google Auth Error:",l),G(!1),alert(`Google ÁôªÂÖ•Â§±ÊïóÔºö${l.error}

Â∏∏Ë¶ãÂéüÂõ†Ôºö
1. ÁÄèË¶ΩÂô®Â∞ÅÈéñ‰∫ÜÁ¨¨‰∏âÊñπ Cookie (Ë´ãÊ™¢Êü•Ë®≠ÂÆö)
2. ‰ΩøÁî®‰∫ÜÁÑ°ÁóïË¶ñÁ™ó
3. Google Cloud Console Êú™Âä†ÂÖ• Origin: ${window.location.origin}`);return}l.access_token?(O(l.access_token),W.current&&(L(l.access_token,W.current),W.current=null)):G(!1)}})}catch(l){console.error("Token Client init failed:",l)}},r=()=>{window.gapi&&window.gapi.load("picker",()=>{console.log("Google Picker API loaded"),ce(!0)})},o=setInterval(()=>{window.google&&window.google.accounts&&!A.current&&t(),window.gapi&&!le&&r(),A.current&&le&&clearInterval(o)},500);return()=>clearInterval(o)},[le]);const U=async t=>{if(!le){alert("Google ÂÖÉ‰ª∂Ê≠£Âú®ËºâÂÖ•‰∏≠ÔºåË´ãÁ®çÂÄô..."),window.gapi&&window.gapi.load("picker",()=>{ce(!0),alert("ÂÖÉ‰ª∂ËºâÂÖ•ÂÆåÊàêÔºåË´ãÂÜçÊ¨°ÈªûÊìäÊåâÈàï„ÄÇ")});return}if(G(!0),E){L(E,t);return}W.current=t,A.current?A.current.requestAccessToken({prompt:""}):(alert("Google ÁôªÂÖ•ÂÖÉ‰ª∂Â∞öÊú™ËºâÂÖ•ÂÆåÊàêÔºåË´ãÁ®çÂæåÂÜçË©¶„ÄÇ"),G(!1))},L=(t,r)=>{try{if(!window.google||!window.google.picker){console.error("Google Picker API not loaded"),alert("Google Picker API Â∞öÊú™ËºâÂÖ•ÔºåË´ãÂà∑Êñ∞È†ÅÈù¢ÂÜçË©¶„ÄÇ"),G(!1);return}const o=r==="docs"?google.picker.ViewId.DOCS:google.picker.ViewId.PHOTOS;new google.picker.PickerBuilder().addView(o).setOAuthToken(t).setDeveloperKey(We).setOrigin(window.location.origin).setCallback(async z=>{if(z.action===google.picker.Action.PICKED){G(!0);const de=z.docs,ue=[];for(const ee of de)try{const ae=await fetch(`https://www.googleapis.com/drive/v3/files/${ee.id}?alt=media`,{headers:{Authorization:`Bearer ${t}`}});if(!ae.ok)throw new Error(`Fetch failed: ${ae.status}`);const ge=await ae.blob(),fe=URL.createObjectURL(ge),he=ee.mimeType.startsWith("video/");ue.push({id:crypto.randomUUID(),type:he?"video":"image",fileName:ee.name,previewUrl:fe,duration:he?5:c.photoDuration,transition:c.defaultTransition,overlays:[]})}catch(ae){console.error("Failed to download Google file:",ae)}d(ee=>[...ee,...ue]),u(ee=>[...ue,...ee]),G(!1)}else z.action===google.picker.Action.CANCEL&&G(!1)}).build().setVisible(!0)}catch(o){console.error("Create Picker Error:",o),G(!1),alert(`ÁÑ°Ê≥ïÂª∫Á´ã Picker„ÄÇ

Ë´ãÁ¢∫Ë™çÔºö
1. API Key Ê≠£Á¢∫‰∏îÂ∑≤ÂïüÁî® Google Picker API
2. Á∂≤ÂüüÂ∑≤Âä†ÂÖ• Allowed Origins`)}},$=async t=>{if(t.target.files&&t.target.files.length>0){G(!0);const r=Array.from(t.target.files),o=[];try{for(const l of r){let C=l,z="";if(l.name.toLowerCase().endsWith(".heic")||l.name.toLowerCase().endsWith(".heif")||l.type==="image/heic"||l.type==="image/heif")try{const ge=(await ke(()=>import("heic2any"),[])).default,fe=await ge({blob:l,toType:"image/jpeg",quality:.8}),he=Array.isArray(fe)?fe[0]:fe;C=new File([he],l.name.replace(/\.heic$/i,".jpg"),{type:"image/jpeg"}),z=URL.createObjectURL(he)}catch(ae){console.error("HEIC ËΩâÊèõÂ§±Êïó",ae);continue}else z=URL.createObjectURL(l);const ue=C.type.startsWith("video/"),ee={id:crypto.randomUUID(),type:ue?"video":"image",fileName:C.name,previewUrl:z,file:C,duration:ue?5:c.photoDuration,transition:c.defaultTransition,overlays:[]};o.push(ee)}d(l=>[...l,...o]),u(l=>[...o,...l])}catch(l){console.error("ÂåØÂÖ•Ê™îÊ°àÊôÇÁôºÁîüÈåØË™§",l)}finally{G(!1),w.current&&(w.current.value="")}}},H=async()=>{if(i.length===0)return alert("Ê≤íÊúâÁ¥†ÊùêÂèØ‰ª•ÂÑ≤Â≠òÔºÅ");ne(!0),se(0);try{await Pe(c,i,B,se)}catch(t){alert("ÂÑ≤Â≠òÂ§±ÊïóÔºö"+t)}ne(!1)},M=async t=>{var o;const r=(o=t.target.files)==null?void 0:o[0];if(r){ne(!0),se(0);try{const l=await Te(r);s(l.settings),d(l.media),u([]),F(l.audioTracks),l.media.length>0&&D(l.media[0].id)}catch{alert("ËºâÂÖ•Â∞àÊ°àÂ§±ÊïóÔºåË´ãÁ¢∫‰øùÊ™îÊ°àÊ†ºÂºèÊ≠£Á¢∫ (.ezp)")}ne(!1),f.current&&(f.current.value="")}},oe=()=>{i.length===0&&h.length===0&&B.length===0||confirm(`Á¢∫ÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâÂÖßÂÆπ‰∏¶ÈáçÊñ∞ÈñãÂßãÂóéÔºü
Ê≠§Âãï‰ΩúÁÑ°Ê≥ïÂæ©ÂéüÔºÅ`)&&(d([]),u([]),F([]),D(null),v(null),S(0),I(K.EDITING),s({outputFileName:"ÊàëÁöÑÁ≤æÂΩ©ÂΩ±Áâá",aspectRatio:"16:9",photoDuration:3,transitionDuration:1,resolution:{width:1280,height:720},collageTitle:"ÊàëÁöÑÁ≤æÂΩ©ÂõûÊÜ∂",defaultTransition:_.RANDOM}),w.current&&(w.current.value=""),a.current&&(a.current.value=""),f.current&&(f.current.value=""))},q=()=>{const t=crypto.randomUUID(),r={id:t,type:"image",fileName:"Á©∫ÁôΩÊãºË≤º",previewUrl:"",duration:c.photoDuration,transition:_.FADE,overlays:[],gradientColors:ve[0]};d(o=>[r,...o]),D(t),S(0)},xe=t=>{if(!R){i.some(o=>o.id===t.id)||d(o=>[...o,t]),D(t.id),u(o=>o.filter(l=>l.id!==t.id));return}const r={id:crypto.randomUUID(),type:"image",sourceUrl:t.previewUrl,x:c.resolution.width/2-200,y:c.resolution.height/2-150,width:400,height:300,scale:1,rotation:0,zIndex:50,crop:{t:0,b:0,l:0,r:0}};d(o=>o.map(C=>C.id===R?{...C,overlays:[...C.overlays,r]}:C).filter(C=>C.id===R||C.id!==t.id)),v(r.id),u(o=>o.filter(l=>l.id!==t.id))},pe=t=>{const r=i.find(o=>o.id===t);r&&r.fileName!=="Á©∫ÁôΩÊãºË≤º"&&u(o=>o.some(l=>l.id===r.id)?o:[r,...o]),d(o=>o.filter(l=>l.id!==t)),R===t&&D(null)},ie=t=>{if(t.target.files){const o=Array.from(t.target.files).map(l=>({file:l,url:URL.createObjectURL(l),name:l.name,duration:30}));F(l=>[...l,...o]),T(!1)}},P=(t,r)=>{if(r.overlays){const o=i.find(l=>l.id===t);o&&o.overlays.filter(C=>{var z;return!((z=r.overlays)!=null&&z.find(de=>de.id===C.id))}).forEach(C=>{C.type==="image"&&C.sourceUrl&&u(z=>[{id:crypto.randomUUID(),type:"image",previewUrl:C.sourceUrl,fileName:"ÈÇÑÂéüÁöÑÁ¥†Êùê",duration:c.photoDuration,transition:_.FADE,overlays:[]},...z])})}d(o=>o.map(l=>l.id===t?{...l,...r}:l))},me=t=>{let r=1280,o=720;t==="4:3"?(r=1024,o=768):t==="9:16"?(r=720,o=1280):t==="1:1"&&(r=1080,o=1080),s(l=>({...l,aspectRatio:t,resolution:{width:r,height:o}}))},J=(t,r)=>{if(!R)return;const o={id:crypto.randomUUID(),type:t,x:c.resolution.width/2-200,y:c.resolution.height/2-50,width:t==="text"?400:100,height:100,scale:1,rotation:0,zIndex:100,text:t==="text"?"Ë´ãËº∏ÂÖ•ÊñáÂ≠óÂÖßÂÆπ":void 0,emoji:t==="sticker"?r:void 0,fontFamily:Ne[0].value,fontSize:60,color:"#ffffff",backgroundColor:"#000000",backgroundOpacity:.7,backgroundPadding:20,backgroundRadius:10,strokeColor:"#000000",strokeWidth:0,animationType:t==="sticker"?"pulse":"none"};d(l=>l.map(C=>C.id===R?{...C,overlays:[...C.overlays,o]}:C)),v(o.id),t==="text"&&x("text")},Ie=()=>{if(b.current===null||N.current===null)return;const t=[...i],r=t.splice(b.current,1)[0];t.splice(N.current,0,r),b.current=null,N.current=null,d(t)},Re=()=>{if(i.length===0){alert("Ë´ãÂÖàÊñ∞Â¢ûÂ†¥ÊôØÁ¥†ÊùêÔºÅ");return}I(K.RENDERING),se(0)},Ce=t=>{const r=document.createElement("a");r.href=t,r.download=`${c.outputFileName}.webm`,document.body.appendChild(r),r.click(),document.body.removeChild(r),I(K.FINISHED),setTimeout(()=>{I(K.EDITING)},2e3)},g=i.find(t=>t.id===R),X=g==null?void 0:g.overlays.find(t=>t.id===y);return e.jsxs("div",{className:"fixed inset-0 bg-[#0b0e14] text-slate-100 flex flex-col overflow-hidden font-sans select-none touch-none",children:[e.jsxs("header",{className:"h-14 shrink-0 px-4 md:px-6 flex justify-between items-center bg-[#161b22] border-b border-slate-800/50 z-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center font-black italic text-sm",children:"E"}),e.jsx("h1",{className:"text-lg font-black tracking-tighter italic text-slate-200 uppercase hidden md:block",children:"Easymaker 123"})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("button",{onClick:oe,className:"px-3 py-1.5 md:px-4 bg-red-900/20 hover:bg-red-900/40 text-red-400 border border-red-900/50 rounded-full text-[10px] font-black uppercase tracking-widest transition-all active:scale-95",children:"ÈáçÊñ∞ÈñãÂßã"}),e.jsx("button",{onClick:()=>{var t;return(t=f.current)==null?void 0:t.click()},className:"px-3 py-1.5 md:px-4 bg-slate-800 hover:bg-slate-700 rounded-full text-[10px] font-black uppercase tracking-widest border border-slate-700 transition-all active:scale-95",children:"ÈñãÂïü"}),e.jsx("input",{type:"file",ref:f,accept:".ezp",className:"hidden",onChange:M}),e.jsx("button",{onClick:H,className:"px-3 py-1.5 md:px-4 bg-slate-800 hover:bg-slate-700 rounded-full text-[10px] font-black uppercase tracking-widest border border-slate-700 transition-all active:scale-95",children:"ÂÑ≤Â≠ò"}),e.jsx("button",{onClick:Re,disabled:n===K.RENDERING,className:`bg-indigo-600 hover:bg-indigo-500 px-4 md:px-6 py-1.5 rounded-full text-xs font-black shadow-lg shadow-indigo-500/20 transition-all active:scale-95 ${n===K.RENDERING?"opacity-50 cursor-not-allowed":""}`,children:n===K.RENDERING?`${V}%`:"ÂåØÂá∫"})]})]}),e.jsxs("main",{className:"flex-1 flex flex-col md:flex-row overflow-hidden min-h-0 relative",children:[e.jsxs("aside",{className:"order-last md:order-first w-full md:w-[340px] h-[35vh] md:h-full shrink-0 bg-[#161b22] flex flex-col border-t md:border-r border-slate-800/50 overflow-hidden relative z-20",children:[e.jsx("div",{className:"flex border-b border-slate-800/30 shrink-0 md:flex-row order-last md:order-first",children:[{id:"media",icon:"üñºÔ∏è",label:"Â™íÈ´î"},{id:"audio",icon:"üéµ",label:"Èü≥Ê®Ç"},{id:"sticker",icon:"üòä",label:"Ë≤ºÂúñ"},{id:"text",icon:"üìù",label:"ÊñáÂ≠ó"},{id:"settings",icon:"‚öôÔ∏è",label:"Ë®≠ÂÆö"}].map(t=>e.jsxs("button",{onClick:()=>x(t.id),className:`flex-1 flex flex-col items-center py-2 md:py-3 gap-1 transition-all ${j===t.id?"bg-indigo-600/10 text-indigo-400 border-t-2 md:border-t-0 md:border-b-2 border-indigo-500":"text-slate-500 hover:text-slate-300"}`,children:[e.jsx("span",{className:t.id==="text"?"text-sm font-black":"text-lg",children:t.icon}),e.jsx("span",{className:"text-[9px] md:text-[10px] font-bold tracking-widest",children:t.label})]},t.id))}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-5 scrollbar-thin bg-[#161b22]",children:[j==="media"&&e.jsxs("div",{className:"space-y-4 md:space-y-6 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 md:gap-3",children:[e.jsxs("button",{onClick:()=>{var t;return(t=w.current)==null?void 0:t.click()},className:"col-span-2 py-3 md:py-4 bg-slate-800/40 border border-slate-700/50 rounded-2xl flex items-center justify-center gap-2 hover:bg-slate-700/60 transition-all active:scale-95 group",children:[e.jsx("span",{className:"text-xl group-hover:scale-110 transition-transform",children:"üì§"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"ÂåØÂÖ•Êú¨Âú∞"})]}),e.jsxs("button",{onClick:()=>U("docs"),className:"py-2 md:py-3 bg-blue-600/10 border border-blue-500/20 rounded-2xl flex flex-col items-center justify-center gap-1 hover:bg-blue-600/20 transition-all active:scale-95",children:[e.jsx("span",{className:"text-xl",children:"üìÅ"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-blue-400",children:"Drive"})]}),e.jsxs("button",{onClick:()=>U("photos"),className:"py-2 md:py-3 bg-emerald-600/10 border border-emerald-500/20 rounded-2xl flex flex-col items-center justify-center gap-1 hover:bg-emerald-600/20 transition-all active:scale-95",children:[e.jsx("span",{className:"text-xl",children:"üåà"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-emerald-400",children:"Photos"})]}),e.jsxs("button",{onClick:q,className:"col-span-2 py-2 md:py-3 bg-indigo-600/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center gap-2 hover:bg-indigo-600/20 transition-all active:scale-95",children:[e.jsx("span",{className:"text-xl",children:"üß©"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-400",children:"Êñ∞Â¢ûÁ©∫ÁôΩÊãºË≤º"})]})]}),e.jsx("input",{type:"file",ref:w,multiple:!0,accept:"image/*,video/*,.heic,.HEIC",onChange:$,className:"hidden"}),e.jsxs("div",{className:"space-y-2 md:space-y-3 mt-4",children:[e.jsxs("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:["ÂæÖ‰ΩøÁî® (",h.length,")"]}),h.length>0?e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-2 gap-2",children:h.map(t=>e.jsx("div",{className:"aspect-video bg-[#0b0e14] rounded-xl overflow-hidden border border-slate-800 group relative cursor-pointer",onClick:()=>xe(t),children:e.jsx("img",{src:t.previewUrl,className:"w-full h-full object-cover transition-transform group-hover:scale-110",alt:""})},t.id))}):e.jsx("div",{className:"py-8 border border-dashed border-slate-800 rounded-2xl flex flex-col items-center justify-center opacity-40 text-center",children:e.jsx("p",{className:"text-[9px] font-bold uppercase",children:"ÁÑ°ÂèØÁî®Á¥†Êùê"})})]})]}),j==="audio"&&e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-left-4 duration-300",children:[e.jsxs("button",{onClick:()=>{var t;return(t=a.current)==null?void 0:t.click()},className:"w-full py-4 bg-slate-800/40 border border-slate-700/50 rounded-2xl flex items-center justify-center gap-3 hover:bg-slate-700 transition-colors",children:[e.jsx("span",{className:"text-xl",children:"üìÅ"}),e.jsx("span",{className:"text-xs font-black",children:"Êú¨Âú∞Èü≥Ê®ÇÂåØÂÖ•"})]}),e.jsxs("button",{onClick:()=>T(!0),className:"w-full py-4 bg-red-600/10 border border-red-500/20 rounded-2xl flex items-center justify-center gap-3 hover:bg-red-600/20 text-red-500 transition-colors",children:[e.jsx("span",{className:"text-xl",children:"üé¨"}),e.jsx("span",{className:"text-xs font-black",children:"YouTube ‰∏ãËºâ"})]}),e.jsx("input",{type:"file",ref:a,accept:"audio/*",className:"hidden",multiple:!0,onChange:ie}),B.length>0&&e.jsx("div",{className:"space-y-2 pt-2",children:B.map(t=>e.jsxs("div",{className:"p-3 bg-[#0b0e14] rounded-xl border border-slate-800 flex items-center gap-3 group",children:[e.jsx("span",{className:"text-lg",children:"üéµ"}),e.jsx("span",{className:"text-[10px] font-bold truncate flex-1",children:t.name}),e.jsx("button",{onClick:()=>F(r=>r.filter(o=>o.url!==t.url)),className:"text-red-500 opacity-100 md:opacity-0 group-hover:opacity-100 transition-opacity",children:"‚úï"})]},t.url))})]}),j==="sticker"&&e.jsx("div",{className:"grid grid-cols-4 gap-2 animate-in fade-in duration-300",children:Me.map(t=>e.jsx("button",{onClick:()=>J("sticker",t),className:"aspect-square bg-slate-800/40 rounded-xl hover:bg-slate-700 text-2xl flex items-center justify-center transition-all active:scale-90",children:t},t))}),j==="text"&&e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-left-4 duration-300 h-full flex flex-col",children:[e.jsxs("button",{onClick:()=>J("text"),className:"shrink-0 w-full py-3 bg-indigo-600 text-white rounded-2xl text-xs font-black shadow-lg shadow-indigo-500/20 active:scale-95 transition-all flex items-center justify-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:"Ôºã"})," Êñ∞Â¢ûÊñáÂ≠ó"]}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-1 scrollbar-thin",children:X&&X.type==="text"?e.jsxs("div",{className:"space-y-4 pt-2 border-t border-slate-800/50",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest",children:"Á∑®ËºØ‰∏≠"}),e.jsx("button",{onClick:()=>{P(g.id,{overlays:g.overlays.filter(t=>t.id!==y)}),v(null)},className:"text-red-500 text-[10px] font-black hover:underline",children:"Âà™Èô§"})]}),e.jsx("div",{className:"space-y-1",children:e.jsx("textarea",{value:X.text,onChange:t=>P(g.id,{overlays:g.overlays.map(r=>r.id===y?{...r,text:t.target.value}:r)}),className:"w-full bg-[#0b0e14] border border-slate-700 p-2 rounded-xl text-xs font-medium outline-none focus:border-indigo-500",rows:2})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("select",{value:X.fontFamily,onChange:t=>P(g.id,{overlays:g.overlays.map(r=>r.id===y?{...r,fontFamily:t.target.value}:r)}),className:"w-full bg-[#0b0e14] border border-slate-700 p-2 rounded-xl text-[10px] font-bold focus:border-indigo-500 outline-none",children:Ne.map(t=>e.jsx("option",{value:t.value,children:t.name},t.value))}),e.jsx("input",{type:"color",value:X.color,onChange:t=>P(g.id,{overlays:g.overlays.map(r=>r.id===y?{...r,color:t.target.value}:r)}),className:"w-full h-10 rounded-lg bg-[#0b0e14] border border-slate-700 p-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-[1fr_40px] gap-2 items-center",children:[e.jsx("span",{className:"text-[9px] text-slate-500",children:"Â§ñÊ°Ü"}),e.jsx("input",{type:"color",value:X.strokeColor,onChange:t=>P(g.id,{overlays:g.overlays.map(r=>r.id===y?{...r,strokeColor:t.target.value}:r)}),className:"w-full h-6 rounded-lg bg-transparent border-none"})]}),e.jsx("input",{type:"range",min:"0",max:"20",value:X.strokeWidth,onChange:t=>P(g.id,{overlays:g.overlays.map(r=>r.id===y?{...r,strokeWidth:parseInt(t.target.value)}:r)}),className:"w-full h-1 bg-slate-700 rounded-full appearance-none accent-indigo-500"})]}),e.jsxs("div",{className:"space-y-2 pt-3 mt-2 border-t border-slate-800/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:"ÊñáÂ≠óÂ∫ïÊ°Ü"}),X.backgroundColor&&e.jsx("button",{onClick:()=>P(g.id,{overlays:g.overlays.map(t=>t.id===y?{...t,backgroundColor:""}:t)}),className:"text-[9px] text-red-400 hover:text-red-300",children:"ÁßªÈô§"})]}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-3 items-center",children:[e.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[e.jsx("div",{className:"relative w-8 h-8 rounded-lg overflow-hidden border border-slate-700",children:e.jsx("input",{type:"color",value:X.backgroundColor||"#000000",onChange:t=>P(g.id,{overlays:g.overlays.map(r=>r.id===y?{...r,backgroundColor:t.target.value}:r)}),className:"absolute inset-[-50%] w-[200%] h-[200%] cursor-pointer"})}),e.jsx("span",{className:"text-[8px] text-slate-500",children:"È°èËâ≤"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[8px] text-slate-500 w-6",children:"ÈÄèÊòé"}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:X.backgroundOpacity??.7,onChange:t=>P(g.id,{overlays:g.overlays.map(r=>r.id===y?{...r,backgroundOpacity:parseFloat(t.target.value)}:r)}),className:"flex-1 h-1 bg-slate-700 rounded-full appearance-none accent-indigo-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[8px] text-slate-500 w-6",children:"ÂúìËßí"}),e.jsx("input",{type:"range",min:"0",max:"50",value:X.backgroundRadius??10,onChange:t=>P(g.id,{overlays:g.overlays.map(r=>r.id===y?{...r,backgroundRadius:parseInt(t.target.value)}:r)}),className:"flex-1 h-1 bg-slate-700 rounded-full appearance-none accent-indigo-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[8px] text-slate-500 w-6",children:"ÂÖßË∑ù"}),e.jsx("input",{type:"range",min:"0",max:"50",value:X.backgroundPadding??20,onChange:t=>P(g.id,{overlays:g.overlays.map(r=>r.id===y?{...r,backgroundPadding:parseInt(t.target.value)}:r)}),className:"flex-1 h-1 bg-slate-700 rounded-full appearance-none accent-indigo-500"})]})]})]})]})]}):e.jsx("div",{className:"flex flex-col items-center justify-center py-10 opacity-40",children:e.jsx("p",{className:"text-[10px] font-black uppercase",children:"Ë´ãÈÅ∏ÊìáÊñáÂ≠ó"})})})]}),j==="settings"&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-left-4 duration-300",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Ê™îÂêç"}),e.jsx("input",{type:"text",value:c.outputFileName,onChange:t=>s({...c,outputFileName:t.target.value}),className:"w-full bg-[#0b0e14] border border-slate-700 p-2 rounded-xl text-xs font-bold focus:border-indigo-500 outline-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"ÊØî‰æã"}),e.jsx("div",{className:"grid grid-cols-4 gap-1",children:["16:9","4:3","9:16","1:1"].map(t=>e.jsx("button",{onClick:()=>me(t),className:`py-1.5 px-1 rounded-lg text-[9px] font-black border transition-all ${c.aspectRatio===t?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800/40 border-slate-700 text-slate-400"}`,children:t},t))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"ÁÖßÁâáÁßíÊï∏"}),e.jsxs("span",{className:"text-xs font-black text-indigo-400",children:[c.photoDuration,"s"]})]}),e.jsx("input",{type:"range",min:"1",max:"10",step:"0.5",value:c.photoDuration,onChange:t=>s({...c,photoDuration:parseFloat(t.target.value)}),className:"w-full h-1 bg-slate-700 rounded-full appearance-none accent-indigo-500"})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-800/50 space-y-2",children:[e.jsx("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Ê≥ïÂæãË≥áË®ä"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("a",{href:"https://alice55505-source.github.io/-123/privacy.html",target:"_blank",rel:"noreferrer",className:"text-xs font-bold text-slate-400 hover:text-indigo-400 transition-colors flex items-center gap-2 px-2 py-2 rounded-lg hover:bg-slate-800/50",children:[e.jsx("span",{children:"üõ°Ô∏è"})," Èö±ÁßÅÊ¨äÊîøÁ≠ñ"]}),e.jsxs("a",{href:"https://alice55505-source.github.io/-123/terms.html",target:"_blank",rel:"noreferrer",className:"text-xs font-bold text-slate-400 hover:text-indigo-400 transition-colors flex items-center gap-2 px-2 py-2 rounded-lg hover:bg-slate-800/50",children:[e.jsx("span",{children:"‚öñÔ∏è"})," ÊúçÂãôÊ¢ùÊ¨æ"]})]})]})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-[#0b0e14] h-full overflow-hidden relative order-first md:order-last",children:[e.jsxs("div",{className:"flex-1 p-4 md:p-8 flex items-center justify-center relative min-h-0 bg-[#0b0e14]",children:[e.jsxs("div",{className:"absolute top-2 left-4 md:top-6 md:left-8 z-10 flex flex-col gap-2 transition-opacity duration-500 opacity-100 pointer-events-none",children:[e.jsxs("div",{className:"px-3 py-1 bg-[#161b22]/90 backdrop-blur-md border border-slate-800/50 rounded-full flex items-center gap-2 shadow-2xl w-fit pointer-events-auto",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"}),e.jsxs("span",{className:"text-[9px] md:text-[10px] font-black text-slate-300 uppercase tracking-[0.2em]",children:[k+1," / ",i.length]})]}),g&&g.type==="image"&&e.jsx("button",{onClick:()=>Y(!Z),className:`px-3 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest transition-all shadow-xl pointer-events-auto w-fit ${Z?"bg-red-500 text-white":"bg-slate-800 text-slate-300 hover:bg-slate-700"}`,children:Z?"‚èπÔ∏è ÈÄÄÂá∫Ë£ÅÂâ™":"‚úÇÔ∏è Ë£ÅÂâ™"})]}),e.jsxs("div",{className:"flex items-center gap-6 h-full w-full justify-center",children:[e.jsx("div",{className:"w-full h-full max-w-[960px] aspect-video bg-black rounded-xl md:rounded-[3rem] overflow-hidden transition-all duration-700 relative group/canvas shadow-[0_0_50px_rgba(0,0,0,0.5)] border-[4px] md:border-[12px] border-[#161b22]",children:n===K.RENDERING?e.jsx(m.Suspense,{fallback:e.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-500 font-bold",children:"ËºâÂÖ•È†êË¶ΩÂÖÉ‰ª∂‰∏≠..."}),children:e.jsx(_e,{mediaList:i,audio:B,settings:c,appState:n,onRenderingComplete:Ce,onProgress:se,setSelectedOverlayId:v})}):g?e.jsx(Le,{item:g,settings:c,selectedOverlayId:y,setSelectedOverlayId:v,isCropMode:Z,onUpdate:t=>P(g.id,t)}):e.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center gap-6 bg-gradient-to-br from-[#0b0e14] to-slate-900",children:e.jsx("span",{className:"text-4xl opacity-20",children:"üé®"})})}),e.jsx("div",{className:"hidden md:block",children:g&&g.fileName==="Á©∫ÁôΩÊãºË≤º"&&e.jsxs("div",{className:"w-[180px] shrink-0 bg-[#161b22]/90 backdrop-blur-md rounded-[2rem] p-4 flex flex-col gap-4 border border-slate-800/50 shadow-2xl h-[400px] animate-in slide-in-from-right-8 duration-500",children:[e.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest text-center py-2 border-b border-slate-700/50",children:"üé® Ëé´Ëò≠Ëø™ËÉåÊôØ"}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1 scrollbar-thin",children:ve.map((t,r)=>{var o;return e.jsx("button",{onClick:()=>P(g.id,{gradientColors:t}),className:`w-full aspect-video rounded-xl transition-all hover:scale-105 active:scale-95 border-2 relative overflow-hidden group ${((o=g.gradientColors)==null?void 0:o.name)===t.name?"border-white shadow-lg":"border-transparent hover:border-slate-500"}`,style:{background:`linear-gradient(135deg, ${t.start}, ${t.end})`}},r)})})]})})]})]}),e.jsxs("div",{className:"h-28 md:h-48 shrink-0 bg-[#161b22] border-t border-slate-800/50 flex flex-col px-4 md:px-8 py-3 md:py-5 z-20 transition-all duration-500",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 md:mb-4 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-[9px] md:text-[10px] text-slate-300 font-black tracking-widest uppercase",children:"ÊôÇÈñìËª∏"}),e.jsx("div",{className:"h-3 w-[1px] bg-slate-800"}),e.jsxs("span",{className:"text-[9px] md:text-[10px] text-slate-500 font-bold tracking-widest uppercase",children:[i.reduce((t,r)=>t+(r.type==="video"?r.duration||5:c.photoDuration),0).toFixed(1),"s"]})]}),g&&g.fileName==="Á©∫ÁôΩÊãºË≤º"&&e.jsxs("div",{className:"flex items-center gap-2 md:hidden overflow-x-auto scrollbar-thin max-w-[60%] pb-1",children:[e.jsx("span",{className:"text-[8px] text-slate-500 font-black shrink-0",children:"ËÉåÊôØ"}),ve.map((t,r)=>{var o;return e.jsx("button",{onClick:()=>P(g.id,{gradientColors:t}),className:`w-6 h-6 rounded-full shrink-0 border-2 transition-transform ${((o=g.gradientColors)==null?void 0:o.name)===t.name?"border-white scale-110 shadow-md":"border-slate-700/50"}`,style:{background:`linear-gradient(135deg, ${t.start}, ${t.end})`},title:t.name},r)})]})]}),e.jsxs("div",{className:"flex-1 flex gap-2 md:gap-4 overflow-x-auto pb-2 scrollbar-thin min-h-0 items-center",children:[i.map((t,r)=>{var o;return e.jsxs(ye.Fragment,{children:[e.jsxs("div",{draggable:!0,onDragStart:()=>b.current=r,onDragEnter:()=>N.current=r,onDragEnd:Ie,onDragOver:l=>l.preventDefault(),onClick:()=>{D(t.id),S(r)},className:`relative shrink-0 h-full aspect-video rounded-lg md:rounded-2xl border-2 md:border-4 transition-all overflow-hidden cursor-pointer md:cursor-move group/thumb ${R===t.id?"border-indigo-600 ring-2 ring-indigo-500/20 z-10 scale-105 shadow-xl":"border-slate-800 opacity-60 hover:opacity-100 hover:border-slate-700"}`,style:t.fileName==="Á©∫ÁôΩÊãºË≤º"&&t.gradientColors?{background:`linear-gradient(135deg, ${t.gradientColors.start}, ${t.gradientColors.end})`}:{},children:[t.previewUrl?e.jsx("img",{src:t.previewUrl,className:"w-full h-full object-cover pointer-events-none",alt:""}):!t.gradientColors&&e.jsx("div",{className:"w-full h-full bg-slate-900 flex items-center justify-center text-xl pointer-events-none",children:"üß©"}),e.jsx("div",{className:"absolute bottom-1 left-1 px-1.5 py-0.5 bg-black/70 backdrop-blur-md rounded text-[8px] font-black text-white",children:r+1}),e.jsx("button",{onClick:l=>{l.stopPropagation(),pe(t.id)},className:"absolute top-1 right-1 bg-red-600/90 text-white w-5 h-5 md:w-7 md:h-7 rounded-full text-[8px] md:text-[10px] flex items-center justify-center shadow-lg opacity-100 md:opacity-0 group-hover/thumb:opacity-100 transition-opacity",children:"‚úï"})]}),r<i.length-1&&e.jsx("div",{className:"shrink-0 flex items-center justify-center relative w-4 md:w-8 z-10",children:e.jsxs("button",{onClick:l=>{l.stopPropagation();const C=Object.values(_),z=C.indexOf(t.transition||_.RANDOM),de=C[(z+1)%C.length];P(t.id,{transition:de})},className:"w-5 h-5 md:w-6 md:h-6 rounded-full bg-slate-800 border border-slate-600 hover:border-indigo-500 hover:bg-indigo-600 flex items-center justify-center transition-all z-20 shadow-lg active:scale-90 group/trans",title:`ÁõÆÂâçËΩâÂ†¥: ${He[t.transition||_.RANDOM]}`,children:[e.jsx("span",{className:"text-[8px] text-slate-400 hover:text-white group-hover/trans:hidden",children:"‚ö°"}),e.jsx("span",{className:"text-[7px] text-white hidden group-hover/trans:block font-black uppercase",children:t.transition===_.RANDOM?"R":(o=t.transition)==null?void 0:o.charAt(0)})]})})]},t.id)}),e.jsx("button",{onClick:q,className:"shrink-0 h-full aspect-video bg-[#0b0e14] border-2 border-dashed border-slate-800 rounded-lg md:rounded-3xl flex flex-col items-center justify-center gap-1 text-slate-600 hover:text-indigo-400 hover:border-indigo-600 transition-all hover:bg-slate-800/10 group active:scale-95",children:e.jsx("span",{className:"text-xl md:text-3xl group-hover:scale-110 transition-transform",children:"Ôºã"})})]})]})]})]}),te&&e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/95 flex items-center justify-center p-4 md:p-12 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-[#161b22] w-full max-w-5xl h-[85vh] rounded-[2rem] md:rounded-[4rem] flex flex-col overflow-hidden border border-slate-800 shadow-[0_0_150px_rgba(0,0,0,0.8)]",children:[e.jsxs("div",{className:"p-4 md:p-8 flex justify-between items-center bg-[#0b0e14]/50 border-b border-slate-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsx("span",{className:"text-2xl md:text-3xl",children:"üì•"}),e.jsx("h2",{className:"font-black text-xs md:text-sm uppercase tracking-[0.3em]",children:"YouTube ÂåØÂÖ•"})]}),e.jsx("button",{onClick:()=>T(!1),className:"w-8 h-8 md:w-12 md:h-12 rounded-full hover:bg-slate-800 flex items-center justify-center text-slate-500 hover:text-white transition-all active:scale-90",children:"‚úï"})]}),e.jsx("iframe",{src:"https://ezconv.cc/",className:"flex-1 bg-white"}),e.jsxs("div",{className:"p-6 md:p-10 bg-[#0b0e14] flex flex-col items-center gap-4 md:gap-6",children:[e.jsx("button",{onClick:()=>{var t;return(t=p.current)==null?void 0:t.click()},className:"px-8 md:px-16 py-3 md:py-4 bg-red-600 hover:bg-red-500 text-white font-black rounded-full text-xs transition-all active:scale-95 shadow-2xl shadow-red-600/30 uppercase tracking-[0.2em]",children:"ÈÅ∏Âèñ‰∏ãËºâÊ™îÊ°à"}),e.jsx("input",{type:"file",accept:"audio/*",ref:p,onChange:ie,className:"hidden"})]})]})}),(n===K.RENDERING||Q||re)&&e.jsxs("div",{className:"fixed inset-0 z-[200] bg-[#0b0e14] flex flex-col items-center justify-center gap-8 p-12",children:[e.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 bg-indigo-600 rounded-[2.5rem] flex items-center justify-center text-4xl md:text-5xl shadow-2xl shadow-indigo-600/40 animate-pulse",children:re?"‚òÅÔ∏è":Q?"üìÅ":"‚öôÔ∏è"}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h2",{className:"text-lg md:text-2xl font-black uppercase tracking-[0.4em]",children:re?"ËôïÁêÜ‰∏≠":Q?"Â∞àÊ°àËôïÁêÜ‰∏≠":"ÂåØÂá∫‰∏≠"}),!re&&e.jsxs("span",{className:"text-indigo-400 font-black text-xl tabular-nums",children:[V,"%"]}),re&&e.jsx("button",{onClick:()=>G(!1),className:"mt-8 px-6 py-2 bg-slate-800 border border-slate-700 rounded-full text-xs font-bold text-slate-400 hover:text-white hover:bg-slate-700 transition-all",children:"ÂèñÊ∂à / ÈóúÈñâ"})]})]}),n===K.FINISHED&&e.jsxs("div",{className:"fixed inset-0 z-[200] bg-[#0b0e14] flex flex-col items-center justify-center gap-6",children:[e.jsx("div",{className:"w-24 h-24 bg-emerald-500 rounded-full flex items-center justify-center text-4xl shadow-2xl shadow-emerald-500/30",children:"‚ú®"}),e.jsx("h2",{className:"text-xl md:text-2xl font-black uppercase tracking-[0.3em]",children:"ÂÆåÊàêÔºÅ"})]})]})},Ee=document.getElementById("root");if(!Ee)throw new Error("Could not find root element to mount to");const Be=De.createRoot(Ee);Be.render(e.jsx(ye.StrictMode,{children:e.jsx(ze,{})}));export{K as A,_ as T};
